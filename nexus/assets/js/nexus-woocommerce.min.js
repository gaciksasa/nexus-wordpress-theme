(function(a){const r=window.nexusWooData||{};a(document).ready(function(){d(),u(),l()});function d(){const e=document.getElementById("nexus-offcanvas-cart"),t=document.querySelector(".nexus-offcanvas-cart__overlay"),n=e&&e.querySelector(".nexus-offcanvas-cart__close"),s=document.querySelector(".nexus-header__cart");if(!e)return;function c(i){i&&i.preventDefault(),e.hidden=!1,requestAnimationFrame(()=>{e.classList.add("is-open"),t&&(t.hidden=!1,t.classList.add("is-visible"))}),document.body.style.overflow="hidden",e.setAttribute("aria-hidden","false")}function o(){e.classList.remove("is-open"),t&&t.classList.remove("is-visible"),document.body.style.overflow="",e.setAttribute("aria-hidden","true"),e.addEventListener("transitionend",function i(){e.hidden=!0,t&&(t.hidden=!0),e.removeEventListener("transitionend",i)})}s&&s.addEventListener("click",c),n&&n.addEventListener("click",o),t&&t.addEventListener("click",o),document.addEventListener("keydown",function(i){i.key==="Escape"&&e.classList.contains("is-open")&&o()}),a(document.body).on("added_to_cart",function(){c(null)})}function u(){const e=document.querySelectorAll(".nexus-shop-view-btn"),t=document.querySelector(".products");if(!e.length||!t)return;try{const s=localStorage.getItem("nexusShopView")||"grid";n(s,!1)}catch{}e.forEach(function(s){s.addEventListener("click",function(){const c=this.dataset.view||"grid";n(c,!0)})});function n(s,c){if(e.forEach(function(o){const i=o.dataset.view===s;o.classList.toggle("is-active",i),o.setAttribute("aria-pressed",i?"true":"false")}),t.classList.toggle("nexus-products--list",s==="list"),t.classList.toggle("nexus-products--grid",s==="grid"),c)try{localStorage.setItem("nexusShopView",s)}catch{}}}function l(){a(document.body).on("added_to_cart",function(){f(r.strings&&r.strings.addedToCart||"Added to cart!")})}function f(e){const t=document.querySelector(".nexus-toast");t&&t.remove();const n=document.createElement("div");n.className="nexus-toast",n.setAttribute("role","status"),n.setAttribute("aria-live","polite"),n.textContent=e,document.body.appendChild(n),requestAnimationFrame(()=>n.classList.add("is-visible")),setTimeout(()=>{n.classList.remove("is-visible"),n.addEventListener("transitionend",()=>n.remove(),{once:!0})},3e3)}})(jQuery);
