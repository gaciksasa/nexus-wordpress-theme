// =============================================================================
// Elementor Widgets - Nexus Custom Styles
// =============================================================================
@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

// -------------------------------------------------------------------------
// Icon Box
// -------------------------------------------------------------------------
.nexus-icon-box {

	// ---- Stacked (icon above) — card style ----
	&--stacked {
		display: flex;
		flex-direction: column;
		background: var(--nexus-color-white);
		border-radius: 20px;
		border: 1px solid var(--nexus-border-color);
		padding: 2.25rem 2rem;
		height: 100%;
		position: relative;
		overflow: hidden;
		transition: transform 0.32s ease, box-shadow 0.32s ease, border-color 0.32s ease;

		// Subtle top-accent bar that grows on hover
		&::before {
			content: '';
			position: absolute;
			top: 0;
			inset-inline: 0;
			height: 3px;
			background: linear-gradient(90deg, var(--nexus-color-secondary), var(--nexus-color-primary));
			transform: scaleX(0);
			transform-origin: left;
			transition: transform 0.32s ease;
		}

		&:hover {
			transform: translateY(-10px);
			box-shadow: 0 24px 48px rgba(0 0 0 / 0.09);
			border-color: transparent;

			&::before { transform: scaleX(1); }
		}
	}

	// ---- Inline (icon left) ----
	&--inline {
		display: flex;
		align-items: flex-start;
		gap: 1.25rem;

		.nexus-icon-box__icon-wrap { flex-shrink: 0; }
	}

	// ---- Icon wrap ----
	&__icon-wrap {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 64px;
		height: 64px;
		border-radius: 16px;
		background: rgba(233 69 96 / 0.09);
		margin-block-end: 1.5rem;
		flex-shrink: 0;
		transition: background 0.25s ease, transform 0.25s ease;

		.nexus-icon-box--stacked:hover & {
			background: rgba(233 69 96 / 0.14);
			transform: scale(1.08) rotate(-3deg);
		}

		.nexus-icon-box--inline & {
			margin-block-end: 0;
		}
	}

	&__icon {
		font-size: 1.875rem;
		color: var(--nexus-color-secondary);
		display: flex;
		align-items: center;
		line-height: 1;
	}

	// ---- Content ----
	&__content {
		display: flex;
		flex-direction: column;
		flex: 1;
	}

	&__title {
		font-size: 1.125rem;
		font-weight: 700;
		color: var(--nexus-color-primary);
		margin-block: 0 0.6rem;
		line-height: 1.3;

		a {
			color: inherit;
			text-decoration: none;
			transition: color 0.2s ease;

			&:hover { color: var(--nexus-color-secondary); }
		}

		.nexus-icon-box--inline & { margin-block-start: 0; }
	}

	&__desc {
		font-size: 0.9375rem;
		line-height: 1.75;
		color: var(--nexus-color-muted);
		margin: 0;
		flex: 1;
	}

	&__link {
		display: inline-flex;
		align-items: center;
		gap: 0.35rem;
		margin-block-start: 1.25rem;
		font-size: 0.875rem;
		font-weight: 600;
		color: var(--nexus-color-secondary);
		text-decoration: none;
		transition: gap 0.2s ease, color 0.2s ease;

		&::after {
			content: '→';
			transition: transform 0.2s ease;
		}

		&:hover {
			gap: 0.55rem;

			&::after { transform: translateX(3px); }
		}
	}
}

// Icon Box — flex layout fix for Elementor containers
// Elementor Flexbox Container structure: .e-con > .e-con-inner > .elementor-widget
// Both selectors needed: newer Elementor uses .e-con-inner, older may not.
.e-con > .elementor-widget-nexus-icon-box,
.e-con-inner > .elementor-widget-nexus-icon-box {
	flex: 1 1 260px;
	min-width: 0;
}

// Ensure the inner container wraps to multiple rows when needed
.e-con-inner:has(> .elementor-widget-nexus-icon-box) {
	flex-wrap: wrap;
}

// -------------------------------------------------------------------------
// Hero Slider — full-width overrides
// -------------------------------------------------------------------------

// Force the Elementor widget wrapper and its parent container to be full-width.
// This allows the hero to break out of any boxed container.
.elementor-widget-nexus-hero-slider,
.elementor-widget-nexus-hero-slider .elementor-widget-container {
	width: 100%;
	max-width: 100%;
	padding: 0;
	margin: 0;
}

// The Elementor container holding the hero should be padding-free and full-width.
.e-con:has(> .elementor-widget-nexus-hero-slider),
.e-con:has(.elementor-widget-nexus-hero-slider) {
	--container-max-width: 100%;
	padding: 0 !important;
	max-width: 100% !important;
}

// -------------------------------------------------------------------------
// Hero Slider
// -------------------------------------------------------------------------
.nexus-hero-slider {
	position: relative;

	// Bottom-vignette: ensures legibility regardless of overlay transparency
	&::after {
		content: '';
		position: absolute;
		inset-inline: 0;
		bottom: 0;
		height: 45%;
		background: linear-gradient(to top, rgba(0 0 0 / 0.55) 0%, transparent 100%);
		z-index: 1;
		pointer-events: none;
	}

	.nexus-hero-slide {
		position: relative;
		overflow: hidden;
		background-size: cover;
		background-position: center;
		background-repeat: no-repeat;

		&__bg {
			position: absolute;
			inset: 0;
			background-size: cover;
			background-position: center;
		}

		&__overlay {
			position: absolute;
			inset: 0;
		}

		&__container {
			position: relative;
			z-index: 2;
			height: 100%;
			display: flex;
			align-items: center;
		}

		&__content {
			position: relative;
			display: flex;
			flex-direction: column;
			align-items: center;
			text-align: center;
			justify-content: center;
			padding: 6rem 2rem;
			color: #fff;
			width: 100%;
		}

		&__tagline {
			display: inline-flex;
			align-items: center;
			gap: 0.75rem;
			font-size: 0.75rem;
			font-weight: 700;
			text-transform: uppercase;
			letter-spacing: 0.22em;
			color: var(--nexus-color-secondary);
			margin-block-end: 1.25rem;

			&::before,
			&::after {
				content: '';
				display: block;
				width: 32px;
				height: 1px;
				background: var(--nexus-color-secondary);
				opacity: 0.7;
			}
		}

		&__title {
			font-size: clamp(2.25rem, 5.5vw, 4.5rem);
			font-weight: 800;
			line-height: 1.08;
			color: #fff;
			margin-block: 0 1.25rem;
			max-width: 860px;
			letter-spacing: -0.02em;
		}

		&__text {
			font-size: clamp(1rem, 1.8vw, 1.175rem);
			line-height: 1.75;
			color: rgba(255 255 255 / 0.8);
			margin-block-end: 2.25rem;
			max-width: 560px;
			font-weight: 400;
		}

		&__actions {
			display: flex;
			gap: 1rem;
			flex-wrap: wrap;
			justify-content: center;

			// Override buttons for hero context — pill shape, larger
			.nexus-btn {
				border-radius: 50rem;
				padding: 0.85em 2.25em;
				font-size: 0.9375rem;
				font-weight: 600;
				letter-spacing: 0.01em;
			}

			.nexus-btn--primary {
				background: var(--nexus-color-secondary);
				border-color: var(--nexus-color-secondary);
				box-shadow: 0 4px 24px rgba(233 69 96 / 0.4);

				&:hover {
					background: #fff;
					border-color: #fff;
					color: var(--nexus-color-primary);
					box-shadow: 0 8px 32px rgba(233 69 96 / 0.3);
				}
			}

			.nexus-btn--outline-white {
				border-color: rgba(255 255 255 / 0.5);
				backdrop-filter: blur(4px);
				background: rgba(255 255 255 / 0.08);

				&:hover {
					background: rgba(255 255 255 / 0.18);
					border-color: rgba(255 255 255 / 0.8);
				}
			}
		}
	}

	// Content alignment variants
	&.content-left .nexus-hero-slide__content {
		align-items: flex-start;
		text-align: left;

		.nexus-hero-slide__tagline::before { display: none; }
		.nexus-hero-slide__tagline::after  { display: none; }
		.nexus-hero-slide__tagline         { padding-inline-start: 0; }
		.nexus-hero-slide__text            { margin-inline: 0; }
		.nexus-hero-slide__actions         { justify-content: flex-start; }
	}

	&.content-center .nexus-hero-slide__content {
		align-items: center;
		text-align: center;

		.nexus-hero-slide__text { margin-inline: auto; }
	}

	&.content-right .nexus-hero-slide__content {
		align-items: flex-end;
		text-align: right;

		.nexus-hero-slide__tagline::before { display: none; }
		.nexus-hero-slide__text            { margin-inline: 0 0 0 auto; }
		.nexus-hero-slide__actions         { justify-content: flex-end; }
	}

	// Custom navigation arrows — glassmorphism circular
	.swiper-button-prev,
	.swiper-button-next {
		width: 52px;
		height: 52px;
		border-radius: 50%;
		background: rgba(255 255 255 / 0.12);
		backdrop-filter: blur(6px);
		border: 1px solid rgba(255 255 255 / 0.22);
		color: #fff;
		transition: background 0.25s ease, border-color 0.25s ease, transform 0.25s ease;
		z-index: 10;
		margin-top: 0;
		top: 50%;
		transform: translateY(-50%);

		&::after {
			font-size: 1rem;
			font-weight: 700;
			color: #fff;
		}

		&:hover {
			background: var(--nexus-color-secondary);
			border-color: var(--nexus-color-secondary);
			transform: translateY(-50%) scale(1.08);
		}
	}

	.swiper-button-prev { left: 1.75rem; }
	.swiper-button-next { right: 1.75rem; }

	// Line pagination — thin animated lines
	.swiper-pagination {
		bottom: 1.75rem;
		z-index: 10;

		&-bullet {
			width: 28px;
			height: 3px;
			border-radius: 2px;
			background: rgba(255 255 255 / 0.4);
			opacity: 1;
			margin: 0 4px;
			transition: width 0.35s ease, background 0.25s ease;

			&-active {
				width: 52px;
				background: #fff;
			}
		}
	}
}

// -------------------------------------------------------------------------
// Portfolio Grid
// -------------------------------------------------------------------------
.nexus-portfolio-wrap {}

.nexus-portfolio-filter {
	display: flex;
	gap: 0.5rem;
	flex-wrap: wrap;
	margin-block-end: 2.5rem;

	&__btn {
		display: inline-block;
		padding: 0.4rem 1.1rem;
		border: 1px solid var(--nexus-border-color);
		border-radius: 100px;
		background: transparent;
		cursor: pointer;
		font-size: 0.875rem;
		color: var(--nexus-text-color);
		transition: all var(--nexus-transition-fast);

		&:hover,
		&.is-active {
			background-color: var(--nexus-primary);
			border-color: var(--nexus-primary);
			color: #fff;
		}
	}
}

.nexus-portfolio-grid {
	display: grid;
	grid-template-columns: repeat(var(--nexus-portfolio-cols, 3), 1fr);
	gap: 1.5rem;

	@include respond-below(md) { grid-template-columns: repeat(2, 1fr); }
	@include respond-below(sm) { grid-template-columns: 1fr; }
}

.nexus-portfolio-item {
	position: relative;
	border-radius: var(--nexus-border-radius);
	overflow: hidden;

	&__img-wrap {
		position: relative;
		overflow: hidden;

		img {
			position: absolute;
			inset: 0;
			width: 100%;
			height: 100%;
			object-fit: cover;
			transition: transform var(--nexus-transition-base);
		}
	}

	&:hover &__img-wrap img {
		transform: scale(1.06);
	}

	&__overlay {
		position: absolute;
		inset: 0;
		display: flex;
		align-items: center;
		justify-content: center;
		opacity: 0;
		transition: opacity var(--nexus-transition-base);
		font-size: 1.75rem;
		color: #fff;
	}

	&:hover &__overlay {
		opacity: 1;
	}

	&__info {
		padding: 1rem;
		background-color: var(--nexus-bg);
	}

	&__cat {
		font-size: 0.75rem;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		color: var(--nexus-primary);
		display: block;
		margin-block-end: 0.25rem;
	}

	&__title {
		font-size: 1rem;
		margin: 0;
	}

	&__link { text-decoration: none; color: inherit; }
}

// -------------------------------------------------------------------------
// Testimonials
// -------------------------------------------------------------------------
.nexus-testimonials {
	&--slider { overflow: hidden; }

	&__dots {
		margin-block-start: 1.5rem;
		text-align: center;
	}
}

.nexus-testimonials-grid {
	display: grid;
	grid-template-columns: repeat(var(--nexus-testimonials-cols, 3), 1fr);
	gap: 1.5rem;

	@include respond-below(md) { grid-template-columns: repeat(2, 1fr); }
	@include respond-below(sm) { grid-template-columns: 1fr; }
}

.nexus-testimonial-card {
	background-color: var(--nexus-bg);
	border: 1px solid var(--nexus-border-color);
	border-radius: var(--nexus-border-radius-lg);
	padding: 2rem;
	position: relative;
	transition: box-shadow var(--nexus-transition-base);

	&:hover {
		box-shadow: var(--nexus-shadow-md);
	}

	&__quote {
		font-size: 3.5rem;
		line-height: 0.75;
		color: var(--nexus-primary);
		font-family: Georgia, serif;
		margin-block-end: 0.75rem;
		opacity: 0.4;
	}

	&__stars {
		display: flex;
		gap: 0.15rem;
		margin-block-end: 0.75rem;
	}

	&__star { color: #f5a623; font-size: 0.875rem;
		&.is-empty { color: var(--nexus-border-color); }
	}

	&__text {
		font-size: 0.9375rem;
		line-height: 1.75;
		color: var(--nexus-text-secondary);
		margin-block-end: 1.5rem;
		font-style: italic;
	}

	&__author {
		display: flex;
		align-items: center;
		gap: 0.875rem;
	}

	&__avatar {
		flex-shrink: 0;

		img {
			width: 48px;
			height: 48px;
			border-radius: 50%;
			object-fit: cover;
		}
	}

	&__name {
		display: block;
		font-weight: 700;
		font-size: 0.9375rem;
	}

	&__position {
		display: block;
		font-size: 0.8125rem;
		color: var(--nexus-text-muted);
	}
}

// -------------------------------------------------------------------------
// Team
// -------------------------------------------------------------------------
.nexus-team-grid {
	display: grid;
	grid-template-columns: repeat(var(--nexus-team-cols, 4), 1fr);
	gap: 1.875rem;

	@include respond-below(lg) { grid-template-columns: repeat(3, 1fr); }
	@include respond-below(md) { grid-template-columns: repeat(2, 1fr); }
	@include respond-below(sm) { grid-template-columns: 1fr; }
}

.nexus-team-member {
	&__img-wrap {
		position: relative;
		overflow: hidden;
		border-radius: var(--nexus-border-radius-lg);
		aspect-ratio: 3/4;

		img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			transition: transform var(--nexus-transition-base);
		}
	}

	&:hover &__img-wrap img {
		transform: scale(1.05);
	}

	&__overlay {
		position: absolute;
		inset: 0;
		background: rgba(0 0 0 / 0.55);
		display: flex;
		align-items: flex-end;
		justify-content: center;
		padding-block-end: 1.5rem;
		opacity: 0;
		transition: opacity var(--nexus-transition-base);
	}

	&:hover &__overlay { opacity: 1; }

	&__info {
		padding-block-start: 1rem;
	}

	&__name {
		font-size: 1.0625rem;
		margin-block-end: 0.2rem;
	}

	&__position {
		display: block;
		font-size: 0.875rem;
		color: var(--nexus-primary);
		font-weight: 500;
	}

	&__bio {
		font-size: 0.875rem;
		color: var(--nexus-text-secondary);
		line-height: 1.65;
		margin-block-start: 0.5rem;
	}

	&__social {
		display: flex;
		gap: 0.6rem;
		margin-block-start: 0.75rem;

		a {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			width: 2rem;
			height: 2rem;
			border-radius: 50%;
			background-color: rgba(255 255 255 / 15%);
			color: #fff;
			font-size: 0.875rem;
			transition: background-color var(--nexus-transition-fast);
			text-decoration: none;

			&:hover { background-color: var(--nexus-primary); }
		}
	}
}

// -------------------------------------------------------------------------
// Services Grid
// -------------------------------------------------------------------------
.nexus-services-grid {
	display: grid;
	grid-template-columns: repeat(var(--nexus-services-cols, 3), 1fr);
	gap: 1.875rem;

	@include respond-below(md) { grid-template-columns: repeat(2, 1fr); }
	@include respond-below(sm) { grid-template-columns: 1fr; }
}

.nexus-service-card {
	padding: 2rem;
	border-radius: var(--nexus-border-radius-lg);
	background-color: var(--nexus-bg);
	border: 1px solid var(--nexus-border-color);
	transition: transform var(--nexus-transition-base), box-shadow var(--nexus-transition-base), border-color var(--nexus-transition-base);
	text-decoration: none;
	color: inherit;
	display: block;

	// Hover effects
	&--hover-lift:hover {
		transform: translateY(-6px);
		box-shadow: var(--nexus-shadow-lg);
	}

	&--hover-glow:hover {
		box-shadow: 0 0 0 3px rgba(var(--nexus-primary-rgb), 0.2), var(--nexus-shadow-md);
	}

	&--hover-border:hover {
		border-color: var(--nexus-primary);
	}

	// Flat variant
	.nexus-services--flat & {
		border: none;
		background: none;
	}

	// Border left variant
	.nexus-services--border & {
		border: none;
		border-inline-start: 3px solid var(--nexus-primary);
		border-radius: 0 var(--nexus-border-radius-lg) var(--nexus-border-radius-lg) 0;
	}

	// Inline icon
	.nexus-services--icon-left & {
		display: flex;
		align-items: flex-start;
		gap: 1.25rem;
	}

	&__icon-wrap {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		border-radius: 50%;
		flex-shrink: 0;
		background-color: rgba(var(--nexus-primary-rgb), 0.1);
	}

	&__icon {
		color: var(--nexus-primary);
		display: flex;
		align-items: center;
		justify-content: center;
	}

	&__body {}

	&__title {
		font-size: 1.125rem;
		margin-block: 1rem 0.5rem;

		.nexus-services--icon-left & { margin-block-start: 0; }
	}

	&__desc {
		font-size: 0.9375rem;
		line-height: 1.7;
		color: var(--nexus-text-secondary);
		margin: 0;
	}

	&__link {
		display: inline-flex;
		align-items: center;
		gap: 0.3rem;
		margin-block-start: 1rem;
		font-size: 0.875rem;
		font-weight: 600;
		color: var(--nexus-primary);
	}
}

// -------------------------------------------------------------------------
// Pricing Table
// -------------------------------------------------------------------------
.nexus-pricing-table {
	background-color: var(--nexus-bg);
	border: 1px solid var(--nexus-border-color);
	border-radius: var(--nexus-border-radius-xl, 1rem);
	overflow: hidden;
	position: relative;
	transition: transform var(--nexus-transition-base), box-shadow var(--nexus-transition-base);

	&:hover {
		transform: translateY(-4px);
		box-shadow: var(--nexus-shadow-lg);
	}

	&--featured {
		border-color: var(--nexus-primary);
		box-shadow: 0 0 0 3px rgba(var(--nexus-primary-rgb), 0.15);
	}

	&__badge {
		position: absolute;
		top: 1rem;
		inset-inline-end: 1rem;
		background-color: var(--nexus-primary);
		color: #fff;
		font-size: 0.75rem;
		font-weight: 700;
		padding: 0.25rem 0.75rem;
		border-radius: 100px;
		text-transform: uppercase;
		letter-spacing: 0.05em;
	}

	&__header {
		padding: 2rem;
		text-align: center;
		border-block-end: 1px solid var(--nexus-border-color);
	}

	&__icon {
		font-size: 2rem;
		color: var(--nexus-primary);
		margin-block-end: 0.75rem;
	}

	&__plan-name {
		font-size: 1.125rem;
		margin-block-end: 0.25rem;
	}

	&__plan-desc {
		font-size: 0.875rem;
		color: var(--nexus-text-muted);
		margin-block-end: 1.5rem;
	}

	&__price-wrap {
		display: flex;
		align-items: baseline;
		justify-content: center;
		flex-wrap: wrap;
		gap: 0.25rem;
	}

	&__price {
		display: flex;
		align-items: baseline;
	}

	&__currency {
		font-size: 1.25rem;
		font-weight: 700;
		align-self: flex-start;
		margin-block-start: 0.5rem;
	}

	&__amount {
		font-size: 3rem;
		font-weight: 800;
		line-height: 1;
		color: var(--nexus-heading-color);
	}

	&__original {
		font-size: 1rem;
		color: var(--nexus-text-muted);
		text-decoration: line-through;
	}

	&__period {
		font-size: 0.875rem;
		color: var(--nexus-text-muted);
		width: 100%;
		text-align: center;
		margin-block-start: 0.25rem;
	}

	&__features {
		padding: 1.5rem 2rem;

		ul {
			list-style: none;
			padding: 0;
			margin: 0;
		}
	}

	&__feature {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		padding-block: 0.6rem;
		border-block-end: 1px solid var(--nexus-border-color);
		font-size: 0.9375rem;

		&:last-child { border-block-end: none; }

		&.is-unavailable {
			color: var(--nexus-text-muted);
			text-decoration: line-through;

			.nexus-pricing-table__feature-icon { color: var(--nexus-text-muted); }
		}
	}

	&__feature-icon {
		color: var(--nexus-success, #22c55e);
		font-weight: 700;
		font-size: 0.875rem;
		flex-shrink: 0;
	}

	&__footer {
		padding: 1.5rem 2rem;
	}
}

// -------------------------------------------------------------------------
// Counter (multi-item widget, .nexus-cnt prefix)
// -------------------------------------------------------------------------

// Preset 3: Icon Cards — card hover lift
.nexus-cnt--icon-cards .nexus-cnt__card {
	transition: transform 0.3s ease, box-shadow 0.3s ease;

	&:hover {
		transform: translateY(-4px);
		box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
	}
}

// Mobile: reduce padding and font sizes, but keep items in one row
.nexus-cnt {
	@media (max-width: 768px) {
		padding-left: 1rem !important;
		padding-right: 1rem !important;
	}
}

.nexus-cnt__grid {
	@media (max-width: 768px) {
		gap: 1rem !important;
	}
}

.nexus-cnt__item,
.nexus-cnt__card {
	@media (max-width: 768px) {
		padding: 1rem 0.5rem !important;
		min-width: 0 !important;
	}
}

.nexus-cnt__number {
	@media (max-width: 480px) {
		font-size: clamp(1.5rem, 8vw, 2.25rem) !important;
	}
}

.nexus-cnt__prefix,
.nexus-cnt__suffix {
	@media (max-width: 480px) {
		font-size: 1rem !important;
	}
}

.nexus-cnt__label {
	@media (max-width: 480px) {
		font-size: 0.6875rem !important;
		letter-spacing: 0.04em !important;
	}
}

.nexus-cnt__icon {
	@media (max-width: 480px) {
		font-size: 1.5rem !important;
		margin-bottom: 0.5rem !important;
	}
}

.nexus-cnt__icon-wrap {
	@media (max-width: 480px) {
		width: 48px !important;
		height: 48px !important;
		margin-bottom: 0.75rem !important;
	}
}

// Counter — dark mode overrides for light-bg presets
html.nexus-dark {
	.nexus-cnt--minimal-row,
	.nexus-cnt--accent-top,
	.nexus-cnt--circle-icon {
		.nexus-cnt__number { color: #fff !important; }
		.nexus-cnt__label { color: rgba(255, 255, 255, 0.6) !important; }
		.nexus-cnt__headline { color: #fff !important; }
	}

	.nexus-cnt--icon-cards {
		background-color: var(--nexus-bg-subtle, #1e1e2e) !important;

		.nexus-cnt__card {
			background: var(--nexus-surface, #252538) !important;
			box-shadow: 0 2px 16px rgba(0, 0, 0, 0.2);
		}

		.nexus-cnt__number { color: #fff !important; }
		.nexus-cnt__label { color: rgba(255, 255, 255, 0.6) !important; }
		.nexus-cnt__headline { color: #fff !important; }
	}

	.nexus-cnt--circle-icon {
		background-color: var(--nexus-bg-subtle, #1e1e2e) !important;

		.nexus-cnt__icon-wrap {
			background: rgba(233, 69, 96, 0.15) !important;
		}
	}
}

// -------------------------------------------------------------------------
// CTA Banner
// -------------------------------------------------------------------------
.nexus-cta-banner {
	// Scoped CSS vars — each preset overrides these, dark mode overrides light presets.
	--cta-bg: #f8f9fa;
	--cta-heading: #1a1a2e;
	--cta-text: #495057;
	--cta-tagline: var(--nexus-primary);
	--cta-note: #64748b;

	padding: 5rem 2rem;
	position: relative;
	background-color: var(--cta-bg);

	&__inner {
		max-width: var(--nexus-container-max-width);
		margin-inline: auto;
	}

	&__text { flex: 1; }

	&__tagline {
		font-size: 0.875rem;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.08em;
		margin-block-end: 0.5rem;
		color: var(--cta-tagline);
	}

	&__headline {
		font-size: clamp(1.5rem, 3vw, 2.5rem);
		font-weight: 700;
		line-height: 1.25;
		margin-block-end: 0.75rem;
		color: var(--cta-heading);
	}

	&__desc {
		font-size: 1rem;
		line-height: 1.7;
		margin-block-end: 0;
		max-width: 560px;
		color: var(--cta-text);
	}

	&__actions {
		display: flex;
		gap: 1rem;
		flex-wrap: wrap;
		margin-block-start: 1.5rem;
	}

	&__note {
		font-size: 0.8125rem;
		margin-block-start: 1rem;
		color: var(--cta-note);
	}

	// ----- Style 1: Centered Minimal (Light) -----
	&--centered-light {
		text-align: center;

		.nexus-cta-banner__desc { margin-inline: auto; }
		.nexus-cta-banner__actions { justify-content: center; }
	}

	// ----- Style 2: Centered Dark -----
	&--centered-dark {
		--cta-bg: #1a1a2e;
		--cta-heading: #fff;
		--cta-text: #cbd5e1;
		text-align: center;

		.nexus-cta-banner__desc { margin-inline: auto; }
		.nexus-cta-banner__actions { justify-content: center; }
		.nexus-cta-banner__note { text-align: center; }
	}

	// ----- Style 3: Side by Side -----
	&--side-by-side {
		.nexus-cta-banner__inner {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 2.5rem;
			flex-wrap: wrap;
		}

		.nexus-cta-banner__actions {
			margin-block-start: 0;
			flex-shrink: 0;
		}
	}

	// ----- Style 4: Gradient -----
	&--gradient {
		--cta-heading: #fff;
		--cta-text: rgba(255, 255, 255, 0.85);
		--cta-tagline: rgba(255, 255, 255, 0.7);
		background: linear-gradient(135deg, #667eea, #764ba2);
		text-align: center;

		.nexus-cta-banner__desc { margin-inline: auto; }
		.nexus-cta-banner__actions { justify-content: center; }
	}

	// ----- Style 5: Image + Overlay -----
	&--image-overlay {
		--cta-bg: transparent;
		--cta-heading: #fff;
		--cta-text: rgba(255, 255, 255, 0.85);
		background-size: cover;
		background-position: center;
		text-align: center;

		&::before {
			content: '';
			position: absolute;
			inset: 0;
			background-color: rgba(26, 26, 46, 0.8);
		}

		.nexus-cta-banner__inner { position: relative; z-index: 1; }
		.nexus-cta-banner__desc { margin-inline: auto; }
		.nexus-cta-banner__actions { justify-content: center; }
	}

	// ----- Style 6: Split with Accent Bar -----
	&--split-accent {
		--cta-bg: #1a1a2e;
		--cta-heading: #fff;
		--cta-text: #94a3b8;

		.nexus-cta-banner__inner {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 2.5rem;
			flex-wrap: wrap;
			border-inline-start: 4px solid var(--nexus-primary);
			padding-inline-start: 2rem;
		}

		.nexus-cta-banner__actions {
			margin-block-start: 0;
			flex-shrink: 0;
		}
	}

	// ----- Legacy layout compat (centered / left-right) -----
	&--centered {
		--cta-bg: var(--nexus-primary);
		--cta-heading: #fff;
		--cta-text: rgba(255, 255, 255, 0.85);
		text-align: center;

		.nexus-cta-banner__actions { justify-content: center; }
		.nexus-cta-banner__desc { margin-inline: auto; }
	}

	&--left-right {
		--cta-bg: var(--nexus-primary);
		--cta-heading: #fff;
		--cta-text: rgba(255, 255, 255, 0.85);

		.nexus-cta-banner__inner {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 2rem;
			flex-wrap: wrap;
		}

		.nexus-cta-banner__actions {
			margin-block-start: 0;
			flex-shrink: 0;
		}
	}
}

// CTA Banner — dark mode: only light-bg presets need overrides
html.nexus-dark {
	.nexus-cta-banner--centered-light,
	.nexus-cta-banner--side-by-side {
		--cta-bg: var(--nexus-bg-subtle);
		--cta-heading: var(--nexus-heading-color);
		--cta-text: var(--nexus-text-color);
	}
}

// -------------------------------------------------------------------------
// Row with Image
// -------------------------------------------------------------------------
.nexus-rwi {
	padding: 5rem 2rem;
	position: relative;

	&__row {
		display: flex;
		align-items: center;
		gap: 3rem;
		max-width: var(--nexus-container-max-width);
		margin-inline: auto;
		flex-wrap: wrap;
	}

	&__img-col,
	&__text-col {
		flex: 1;
		min-width: 280px;
	}

	&__img-col img {
		width: 100%;
		height: auto;
		display: block;
		border-radius: var(--nexus-border-radius-lg);
		object-fit: cover;
	}

	&__tagline {
		font-size: 0.875rem;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.08em;
		margin-block-end: 0.5rem;
		color: var(--nexus-secondary);
	}

	&__headline {
		font-size: clamp(1.5rem, 3vw, 2.25rem);
		font-weight: 700;
		line-height: 1.25;
		margin-block-end: 0.75rem;
	}

	&__desc {
		font-size: 1rem;
		line-height: 1.7;
		margin-block-end: 1rem;
	}

	&__list {
		list-style: none;
		padding: 0;
		margin: 0 0 1.5rem;
		display: flex;
		flex-direction: column;
		gap: 0.5rem;
	}

	&__stats {
		display: flex;
		gap: 2rem;
		flex-wrap: wrap;
		margin-block-end: 1.5rem;
	}

	&__actions {
		display: flex;
		gap: 1rem;
		flex-wrap: wrap;
	}

	// Style 3: Dark background
	&--image-left-dark {
		background-color: #1a1a2e;
	}

	// Style 4: Light background
	&--image-right-stats {
		background-color: #f8f9fa;
	}

	// Style 5: Card with shadow (dark bg)
	&--card-shadow {
		background-color: #1a1a2e;
		box-shadow: var(--nexus-shadow-lg);
		border-radius: var(--nexus-border-radius-lg);

		.nexus-rwi__headline { color: #fff; }
		.nexus-rwi__tagline { color: #e94560; }
		.nexus-rwi__desc,
		.nexus-rwi__list li { color: #cbd5e1; }
	}

	// Style 6: Accent border on text col
	&--accent-border .nexus-rwi__text-col {
		border-inline-start: 4px solid var(--nexus-secondary);
		padding-inline-start: 2rem;
	}

	// Mobile: stack columns
	@media (max-width: 768px) {
		&__row { flex-direction: column !important; }
		&__img-col,
		&__text-col { min-width: 100%; }
	}
}

// Row with Image — dark mode overrides (uses CSS custom properties)
html.nexus-dark {
	.nexus-rwi--image-left-light,
	.nexus-rwi--image-right-light,
	.nexus-rwi--accent-border {
		--nexus-rwi-heading: #fff;
		--nexus-rwi-tagline: #e94560;
		--nexus-rwi-text: var(--nexus-text-color);

		.nexus-rwi__list li { color: var(--nexus-text-color) !important; }
	}

	.nexus-rwi--image-right-stats {
		--nexus-rwi-heading: #1a1a2e;
		--nexus-rwi-text: #495057;
		background-color: var(--nexus-bg-subtle);
	}
}

// -------------------------------------------------------------------------
// Blog Cards
// -------------------------------------------------------------------------
.nexus-bc {

	// Card hover effects
	&__card {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// Style 2: Minimal bordered
	&--minimal-bordered &__card {
		&:hover {
			border-color: #e94560;
		}
	}

	// Style 3: Dark elegant
	&--dark-elegant &__card {
		&:hover {
			box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
			border-color: rgba(255, 255, 255, 0.15);
		}
	}

	// Style 4: Overlay gradient
	&--overlay-gradient &__card--overlay {
		&:hover {
			transform: translateY(-6px);
			box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
		}
	}

	// Mobile: reduce section padding
	@media (max-width: 768px) {
		padding: 3rem 1rem !important;
	}

	// Prevent text overflow in all cards
	&__card {
		min-width: 0;
		overflow: hidden;
	}

	&__card-title {
		overflow-wrap: break-word;
		word-break: break-word;
	}

	// Style 4: Overlay — smaller min-height on mobile
	&__card--overlay {
		@media (max-width: 768px) {
			min-height: 260px !important;
		}
	}

	// Style 5: Side image — mobile stack
	&__card--side {
		@media (max-width: 768px) {
			flex-direction: column !important;
			gap: 0 !important;

			.nexus-bc__card-side-thumb {
				flex: auto !important;
				max-width: 100% !important;
				width: 100%;
			}

			.nexus-bc__card-side-thumb img {
				width: 100% !important;
				height: 200px !important;
			}

			.nexus-bc__card-body {
				padding: 1.25rem !important;
			}
		}
	}

	// Style 6: Magazine featured — mobile stack
	&__card--mag-featured {
		@media (max-width: 768px) {
			flex-direction: column !important;
			gap: 0 !important;

			.nexus-bc__card-mag-thumb {
				flex: auto !important;
				width: 100%;
			}

			.nexus-bc__card-mag-thumb img {
				height: 220px !important;
			}

			.nexus-bc__card-body {
				padding: 1.25rem !important;
			}
		}
	}

	// Mobile: grid to single column
	&__grid {
		@media (max-width: 768px) {
			grid-template-columns: 1fr !important;
		}

		@media (min-width: 769px) and (max-width: 1024px) {
			grid-template-columns: repeat(2, 1fr) !important;
		}
	}

	// Card footer: wrap on small screens
	&__card-footer {
		@media (max-width: 480px) {
			flex-direction: column !important;
			align-items: flex-start !important;
			gap: 0.5rem;
		}
	}
}

// Blog Cards — dark mode overrides
html.nexus-dark {
	.nexus-bc--classic-light,
	.nexus-bc--minimal-bordered,
	.nexus-bc--side-image,
	.nexus-bc--magazine-featured {
		background-color: var(--nexus-bg) !important;

		.nexus-bc__headline { color: var(--nexus-heading-color); }
		.nexus-bc__desc { color: var(--nexus-text-color); }
		.nexus-bc__card-title a { color: var(--nexus-heading-color) !important; }
		.nexus-bc__card-excerpt { color: var(--nexus-text-color) !important; }

		.nexus-bc__card {
			background-color: var(--nexus-surface) !important;
			border-color: var(--nexus-border-color) !important;
		}
	}

	.nexus-bc--minimal-bordered .nexus-bc__card {
		border-color: var(--nexus-border-color) !important;
	}
}

// -------------------------------------------------------------------------
// Image Cards Grid
// -------------------------------------------------------------------------
.nexus-icg {

	// Mobile: reduce section padding
	@media (max-width: 768px) {
		padding: 3rem 1rem !important;
	}

	// Card hover lift
	&__card {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// Prevent text overflow
	&__card {
		min-width: 0;
	}

	&__card-title {
		overflow-wrap: break-word;
		word-break: break-word;
	}

	// Overlay cards: show overlay + content on hover
	&__card--overlay {
		cursor: pointer;

		&:hover .nexus-icg__card-overlay {
			opacity: 1 !important;
		}

		&:hover .nexus-icg__card-content {
			opacity: 1 !important;
			transform: translateY(0) !important;
		}

		// Touch/mobile: always show overlay + content
		@media (max-width: 768px) {
			.nexus-icg__card-overlay {
				opacity: 0.7 !important;
			}

			.nexus-icg__card-content {
				opacity: 1 !important;
				transform: translateY(0) !important;
			}
		}

		// Normalize masonry aspect ratios on mobile
		@media (max-width: 768px) {
			aspect-ratio: 4/3 !important;
		}
	}

	// Hover-zoom: image scales more
	&__card--zoom {
		&:hover img {
			transform: scale(1.12);
		}
	}

	// Rounded shadow: bigger shadow on hover
	&--rounded-shadow &__card {
		&:hover {
			box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
		}
	}

	// Caption-below: image hover zoom
	&__card--caption {
		.nexus-icg__card-thumb:hover img {
			transform: scale(1.08);
		}
	}

	// Mobile grid
	&__grid {
		@media (max-width: 768px) {
			grid-template-columns: 1fr !important;
			gap: 1.5rem !important;
		}

		@media (min-width: 769px) and (max-width: 1024px) {
			grid-template-columns: repeat(2, 1fr) !important;
		}
	}

	// Caption-below: smaller circle on mobile
	&__card--caption .nexus-icg__card-thumb {
		@media (max-width: 480px) {
			width: 140px !important;
			height: 140px !important;
		}
	}

	// Standard/rounded card body: tighter padding on mobile
	&__card-body {
		@media (max-width: 480px) {
			padding: 1rem 1.25rem 1.25rem !important;
		}
	}
}

// Image Cards Grid — dark mode overrides
html.nexus-dark {
	.nexus-icg--clean-grid,
	.nexus-icg--rounded-shadow,
	.nexus-icg--caption-below,
	.nexus-icg--hover-zoom {
		background-color: var(--nexus-bg) !important;

		.nexus-icg__headline { color: var(--nexus-heading-color); }
		.nexus-icg__desc { color: var(--nexus-text-color); }
		.nexus-icg__card-title { color: var(--nexus-heading-color); }
		.nexus-icg__card-title a { color: var(--nexus-heading-color) !important; }
		.nexus-icg__card-subtitle { color: var(--nexus-text-color); }

		.nexus-icg__card {
			background-color: var(--nexus-surface) !important;
		}
	}
}

// -------------------------------------------------------------------------
// Video Popup
// -------------------------------------------------------------------------
.nexus-video-popup {
	position: relative;
	overflow: hidden;
	background-size: cover;
	background-position: center;
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: var(--nexus-border-radius-lg);

	&__overlay {
		position: absolute;
		inset: 0;
	}

	&__play {
		position: relative;
		z-index: 2;
		border: none;
		cursor: pointer;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		transition: transform var(--nexus-transition-base), box-shadow var(--nexus-transition-base);

		&:hover {
			transform: scale(1.1);
			box-shadow: 0 0 0 12px rgba(255 255 255 / 20%);
		}
	}

	&__play-icon {
		font-size: 1.5rem;
		margin-inline-start: 0.2em; /* optical center for play triangle */
	}

	// Pulse variant
	&__pulse {
		position: absolute;
		inset: -8px;
		border-radius: 50%;
		border: 2px solid currentColor;
		animation: nexus-pulse 2s infinite;
		opacity: 0.4;
	}

	&__caption {
		position: absolute;
		bottom: 1.5rem;
		inset-inline: 0;
		text-align: center;
		z-index: 2;
		font-size: 0.9375rem;
		font-weight: 600;
	}
}

@keyframes nexus-pulse {
	0% { transform: scale(1); opacity: 0.4; }
	50% { transform: scale(1.15); opacity: 0.15; }
	100% { transform: scale(1); opacity: 0.4; }
}

// Video Modal
.nexus-video-modal {
	position: fixed;
	inset: 0;
	z-index: calc(var(--nexus-z-modal) + 10);
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 1rem;

	&:not(.is-open) { pointer-events: none; }

	&__backdrop {
		position: absolute;
		inset: 0;
		background-color: rgba(0 0 0 / 0.92);
		opacity: 0;
		transition: opacity 0.3s ease;
	}

	&.is-open &__backdrop { opacity: 1; }

	&__inner {
		position: relative;
		z-index: 1;
		width: 100%;
		max-width: 900px;
		opacity: 0;
		transform: scale(0.95);
		transition: opacity 0.3s ease, transform 0.3s ease;
	}

	&.is-open &__inner {
		opacity: 1;
		transform: scale(1);
	}

	&__close {
		position: absolute;
		top: -2.5rem;
		inset-inline-end: 0;
		background: none;
		border: none;
		color: #fff;
		font-size: 2rem;
		cursor: pointer;
		line-height: 1;
	}

	&__embed {
		position: relative;
		padding-block-end: 56.25%;
		height: 0;
		overflow: hidden;
		border-radius: var(--nexus-border-radius);
		background-color: #000;

		iframe,
		video {
			position: absolute;
			inset: 0;
			width: 100%;
			height: 100%;
		}
	}
}

// -------------------------------------------------------------------------
// Product Carousel
// -------------------------------------------------------------------------
.nexus-product-carousel {
	overflow: hidden;
	position: relative;
}

.nexus-product-card {
	background-color: var(--nexus-bg);
	border: 1px solid var(--nexus-border-color);
	border-radius: var(--nexus-border-radius-lg);
	overflow: hidden;
	transition: transform var(--nexus-transition-base), box-shadow var(--nexus-transition-base);

	&:hover {
		transform: translateY(-4px);
		box-shadow: var(--nexus-shadow-md);
	}

	&__thumb {
		position: relative;
		overflow: hidden;
		aspect-ratio: 1;

		img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			transition: transform var(--nexus-transition-base);
		}

		&:hover img { transform: scale(1.05); }
	}

	&__badge {
		position: absolute;
		top: 0.75rem;
		inset-inline-start: 0.75rem;
		font-size: 0.6875rem;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.06em;
		padding: 0.2rem 0.5rem;
		border-radius: var(--nexus-border-radius-sm);
		color: #fff;
		z-index: 2;

		&--sale { background-color: var(--nexus-danger, #ef4444); }
		&--featured { background-color: var(--nexus-warning, #f97316); }
	}

	&__actions {
		position: absolute;
		bottom: 0.75rem;
		inset-inline: 0;
		display: flex;
		justify-content: center;
		gap: 0.5rem;
		transform: translateY(100%);
		transition: transform var(--nexus-transition-base);
	}

	&__thumb:hover &__actions {
		transform: translateY(0);
	}

	&__body {
		padding: 1rem;
	}

	&__title {
		font-size: 0.9375rem;
		margin-block-end: 0.5rem;

		a {
			color: var(--nexus-heading-color);
			text-decoration: none;
			transition: color var(--nexus-transition-fast);

			&:hover { color: var(--nexus-primary); }
		}
	}

	&__rating {
		margin-block-end: 0.35rem;

		.star-rating { font-size: 0.8125rem; }
	}

	&__price {
		.price {
			font-weight: 700;
			color: var(--nexus-primary);

			del {
				font-weight: 400;
				color: var(--nexus-text-muted);
				margin-inline-end: 0.3rem;
			}
		}
	}
}

// -------------------------------------------------------------------------
// Testimonials Slider
// -------------------------------------------------------------------------
.nexus-ts {
	position: relative;

	// Card animation.
	&__card--anim {
		opacity: 0;
		transform: translateY(30px);
		transition: opacity 0.6s ease, transform 0.6s ease;

		&.is-visible {
			opacity: 1;
			transform: translateY(0);
		}
	}

	// Swiper nav arrows inside slider.
	.swiper-button-prev,
	.swiper-button-next {
		width: 44px;
		height: 44px;
		background: var(--nexus-color-white);
		border-radius: 50%;
		box-shadow: var(--nexus-shadow-md);

		&::after {
			font-size: 1rem;
			color: var(--nexus-body-color);
		}
	}

	// Dots spacing.
	&__dots {
		margin-top: 1.5rem;
		text-align: center;
	}

	// Bubble speech card — triangle pointer.
	&--bubble-speech .nexus-ts__card--bubble {
		&::after {
			content: '';
			position: absolute;
			bottom: -12px;
			left: 2rem;
			width: 0;
			height: 0;
			border-left: 12px solid transparent;
			border-right: 12px solid transparent;
			border-top: 12px solid #f0f4f8;
		}
	}

	// Bubble — author sits below card with spacing for the triangle.
	&--bubble-speech .nexus-ts__author {
		padding-top: 1.25rem;
	}

	// Large quote — oversized quote mark.
	&--large-quote .nexus-ts__quote {
		font-size: 5rem !important;
		margin-bottom: 1rem !important;
	}

	// Accented cards — glow on hover.
	&--cards-accented .nexus-ts__card--accented {
		transition: box-shadow 0.3s ease, transform 0.3s ease;

		&:hover {
			box-shadow: 0 0 20px rgba(233, 69, 96, 0.15);
			transform: translateY(-2px);
		}
	}

	// General card hover for shadow style.
	&--classic-light .nexus-ts__card--shadow,
	&--dark-elegant .nexus-ts__card--shadow {
		transition: box-shadow 0.3s ease, transform 0.3s ease;

		&:hover {
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
			transform: translateY(-2px);
		}
	}

	// Bordered card hover.
	&--minimal-clean .nexus-ts__card--bordered {
		transition: border-color 0.3s ease, box-shadow 0.3s ease;

		&:hover {
			border-color: var(--nexus-color-secondary);
			box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
		}
	}

	// Mobile.
	@include respond-below(md) {
		padding: 3rem 0 !important;

		&__header {
			margin-bottom: 2rem !important;
		}
	}

	@include respond-below(sm) {
		&__card--large {
			padding: 2rem 1rem !important;
		}
	}
}

// Dark mode overrides for testimonials slider light-bg presets.
.nexus-dark {
	.nexus-ts--classic-light,
	.nexus-ts--minimal-clean,
	.nexus-ts--bubble-speech,
	.nexus-ts--large-quote {
		background-color: var(--nexus-bg) !important;

		.nexus-ts__card {
			background: var(--nexus-bg-subtle) !important;
		}
	}

	.nexus-ts--bubble-speech .nexus-ts__card--bubble::after {
		border-top-color: var(--nexus-bg-subtle);
	}
}

// -------------------------------------------------------------------------
// Feature List
// -------------------------------------------------------------------------
.nexus-fl {

	// ---- Entrance animations ----
	&__item--anim {
		opacity: 0;
		transform: translateY(20px);
		transition: opacity 0.5s ease, transform 0.5s ease;

		&.is-visible {
			opacity: 1;
			transform: none;
		}
	}

	// ---- Check-list divider hover ----
	&--check-list .nexus-fl__item {
		transition: background-color 0.25s ease;

		&:hover {
			background-color: rgba(0, 0, 0, 0.015);
		}
	}

	&--check-list .nexus-fl__icon svg {
		transition: transform 0.25s ease;
	}

	&--check-list .nexus-fl__item:hover .nexus-fl__icon svg {
		transform: scale(1.15);
	}

	// ---- Icon bordered hover ----
	&--icon-bordered .nexus-fl__item {
		transition: box-shadow 0.3s ease, transform 0.3s ease, border-color 0.3s ease;

		&:hover {
			box-shadow: 0 6px 24px rgba(0, 0, 0, 0.08);
			transform: translateY(-2px);
			border-color: var(--nexus-color-secondary) !important;
		}
	}

	// ---- Dark numbered ----
	&--dark-numbered .nexus-fl__item {
		transition: background-color 0.25s ease;

		&:hover {
			background-color: rgba(255, 255, 255, 0.03);
		}
	}

	// ---- Timeline ----
	&--timeline .nexus-fl__timeline-line {
		transition: background-color 0.3s ease;
	}

	&--timeline .nexus-fl__timeline-dot .nexus-fl__icon {
		transition: transform 0.3s ease, box-shadow 0.3s ease;
		box-shadow: 0 0 0 4px #fff;
	}

	&--timeline .nexus-fl__item:hover .nexus-fl__timeline-dot .nexus-fl__icon {
		transform: scale(1.15);
		box-shadow: 0 0 0 4px #fff, 0 0 12px rgba(233, 69, 96, 0.3);
	}

	// ---- Card grid hover ----
	&--card-grid .nexus-fl__item {
		transition: box-shadow 0.3s ease, transform 0.3s ease;

		&:hover {
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
			transform: translateY(-4px);
		}
	}

	&--card-grid .nexus-fl__icon {
		transition: transform 0.3s ease;
	}

	&--card-grid .nexus-fl__item:hover .nexus-fl__icon {
		transform: scale(1.1);
	}

	// ---- Minimal accent ----
	&--minimal-accent .nexus-fl__item {
		transition: border-color 0.3s ease, background-color 0.3s ease, transform 0.3s ease;

		&:hover {
			background-color: rgba(255, 255, 255, 0.06) !important;
			border-left-color: var(--nexus-color-secondary) !important;
			transform: translateX(4px);
		}
	}

	// ---- Responsive ----
	@include respond-below(md) {
		padding: 3rem 0 !important;

		&__header {
			margin-bottom: 2rem !important;
		}

		&__grid {
			grid-template-columns: repeat(2, 1fr) !important;
		}

		&__list {
			grid-template-columns: 1fr !important;
			gap: 0 !important;
		}

		// Icon-bordered cards: stack single column, full-width items.
		&--icon-bordered .nexus-fl__item {
			padding: 1rem !important;
			border-radius: 0 !important;
			border-left: none !important;
			border-right: none !important;
		}

		// Card grid: 2 cols on tablet.
		&--card-grid .nexus-fl__grid {
			grid-template-columns: repeat(2, 1fr) !important;
		}
	}

	@include respond-below(sm) {
		&__grid {
			grid-template-columns: 1fr !important;
		}

		// Icon-bordered: full-width list items.
		&--icon-bordered .nexus-fl__list {
			margin-left: -1rem !important;
			margin-right: -1rem !important;
			max-width: none !important;
		}

		&--icon-bordered .nexus-fl__item {
			gap: 0.75rem !important;
			padding: 0.875rem 1rem !important;
			border-radius: 0 !important;
			border-left: none !important;
			border-right: none !important;
		}

		&--icon-bordered .nexus-fl__icon {
			width: 36px !important;
			height: 36px !important;
		}

		// Card grid: full-width single column items.
		&--card-grid .nexus-fl__grid {
			grid-template-columns: 1fr !important;
			gap: 1rem !important;
			margin-left: -1rem !important;
			margin-right: -1rem !important;
		}

		&--card-grid .nexus-fl__item {
			border-radius: 0 !important;
		}

		&__timeline {
			padding-left: 30px !important;

			.nexus-fl__timeline-dot {
				left: -16px !important;

				.nexus-fl__icon {
					width: 32px !important;
					height: 32px !important;
				}
			}
		}
	}
}

// Dark mode overrides for feature list light-bg presets.
.nexus-dark {
	.nexus-fl--check-list,
	.nexus-fl--icon-bordered,
	.nexus-fl--timeline,
	.nexus-fl--card-grid {
		background-color: var(--nexus-bg) !important;

		.nexus-fl__item-title {
			color: var(--nexus-text-heading) !important;
		}

		.nexus-fl__item-text {
			color: var(--nexus-text) !important;
		}

		.nexus-fl__title {
			color: var(--nexus-text-heading) !important;
		}

		.nexus-fl__desc {
			color: var(--nexus-text) !important;
		}
	}

	.nexus-fl--icon-bordered .nexus-fl__item,
	.nexus-fl--card-grid .nexus-fl__item {
		background: var(--nexus-bg-subtle) !important;
	}

	.nexus-fl--timeline .nexus-fl__timeline-dot .nexus-fl__icon {
		box-shadow: 0 0 0 4px var(--nexus-bg);
	}
}

// -------------------------------------------------------------------------
// Image Cards Scroller
// -------------------------------------------------------------------------
.nexus-ics {

	// ---- Standard card hover ----
	&__card--standard {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12) !important;
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// ---- Overlay card hover ----
	&__card--overlay {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2) !important;
		}

		&:hover img {
			transform: scale(1.08);
		}
	}

	// Gradient-hover: overlay + content revealed on hover.
	&--gradient-hover .nexus-ics__card--overlay {
		&:hover .nexus-ics__card-overlay {
			opacity: 1 !important;
		}

		&:hover .nexus-ics__card-content {
			opacity: 1 !important;
		}
	}

	// ---- Caption card hover ----
	&__card--caption {
		&:hover {
			transform: translateY(-2px);
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// ---- Swiper arrows ----
	&__arrow {
		width: 48px !important;
		height: 48px !important;
		border-radius: 50% !important;
		background: rgba(255, 255, 255, 0.85) !important;
		backdrop-filter: blur(8px);
		border: 1px solid rgba(0, 0, 0, 0.08) !important;
		box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
		transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
		z-index: 10;
		top: 50%;
		margin-top: 0;
		transform: translateY(-50%);

		&::after {
			font-size: 14px !important;
			font-weight: 700;
			color: #1a1a2e;
		}

		&:hover {
			background: var(--nexus-color-secondary, #e94560) !important;
			border-color: var(--nexus-color-secondary, #e94560) !important;
			box-shadow: 0 6px 24px rgba(233, 69, 96, 0.3);
			transform: translateY(-50%) scale(1.08);

			&::after {
				color: #fff;
			}
		}

		&--prev {
			left: 1rem;
		}

		&--next {
			right: 1rem;
		}
	}

	// Dark presets: glassmorphism arrows.
	&--dark-cinema &__arrow,
	&--fullwidth-hero &__arrow {
		background: rgba(255, 255, 255, 0.12) !important;
		border-color: rgba(255, 255, 255, 0.2) !important;
		box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);

		&::after {
			color: #fff;
		}

		&:hover {
			background: rgba(255, 255, 255, 0.25) !important;
			border-color: rgba(255, 255, 255, 0.4) !important;
			box-shadow: 0 6px 24px rgba(0, 0, 0, 0.3);
		}
	}

	// ---- Pagination dots ----
	&__dots {
		margin-top: 1.5rem !important;
		position: relative !important;
		bottom: auto !important;

		.swiper-pagination-bullet {
			width: 10px;
			height: 10px;
			opacity: 0.3;
			transition: opacity 0.3s ease, transform 0.3s ease;
		}

		.swiper-pagination-bullet-active {
			opacity: 1;
			transform: scale(1.2);
		}
	}

	&--minimal-slide &__dots .swiper-pagination-bullet-active,
	&--gradient-hover &__dots .swiper-pagination-bullet-active {
		background: #e94560;
	}

	&--dark-cinema &__dots .swiper-pagination-bullet-active {
		background: #e94560;
	}

	&--rounded-peek &__dots .swiper-pagination-bullet-active,
	&--caption-card &__dots .swiper-pagination-bullet-active {
		background: #0f3460;
	}

	&--fullwidth-hero &__dots .swiper-pagination-bullet {
		background: #fff;
	}

	&--fullwidth-hero &__dots .swiper-pagination-bullet-active {
		background: #fff;
	}

	// ---- Responsive ----
	@include respond-below(md) {
		padding: 3rem 0 !important;

		&__header {
			margin-bottom: 1.5rem !important;
		}

		&__arrow {
			display: none !important;
		}
	}

	@include respond-below(sm) {
		&__card--standard {
			border-radius: 8px !important;
		}

		&__card--overlay {
			border-radius: 8px !important;
		}

		&__dots {
			margin-top: 1rem !important;
		}
	}
}

// Dark mode overrides for image cards scroller light-bg presets.
.nexus-dark {
	.nexus-ics--minimal-slide,
	.nexus-ics--rounded-peek,
	.nexus-ics--caption-card,
	.nexus-ics--gradient-hover {
		background-color: var(--nexus-bg) !important;

		.nexus-ics__card--standard,
		.nexus-ics__card--caption {
			background: var(--nexus-bg-subtle) !important;
		}

		.nexus-ics__card-title {
			color: var(--nexus-text-heading) !important;
		}

		.nexus-ics__title {
			color: var(--nexus-text-heading) !important;
		}

		.nexus-ics__desc {
			color: var(--nexus-text) !important;
		}
	}
}

// -------------------------------------------------------------------------
// Team Grid
// -------------------------------------------------------------------------
.nexus-tg {

	// ---- Entrance animation ----
	&__card--anim {
		opacity: 0;
		transform: translateY(20px);
		transition: opacity 0.5s ease, transform 0.5s ease;

		&.is-visible {
			opacity: 1;
			transform: none;
		}
	}

	// ---- Clean cards (style 1): overlay on photo hover ----
	&--clean-cards .nexus-tg__card {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12) !important;
		}

		&:hover img {
			transform: scale(1.05);
		}

		&:hover .nexus-tg__overlay {
			opacity: 1 !important;
		}
	}

	// ---- Rounded photo (style 2): card lift ----
	&--rounded-photo .nexus-tg__card {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
		}
	}

	// ---- Dark overlay (style 3): reveal on hover ----
	&--dark-overlay .nexus-tg__card {
		&:hover img {
			transform: scale(1.08);
		}

		&:hover .nexus-tg__overlay {
			opacity: 1 !important;
		}
	}

	// ---- Minimal row (style 4): hover bg ----
	&--minimal-row .nexus-tg__card {
		&:hover {
			background-color: rgba(0, 0, 0, 0.02) !important;
		}
	}

	// ---- Bordered hover (style 5): lift + accent border ----
	&--bordered-hover .nexus-tg__card {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1) !important;
			border-color: var(--nexus-color-secondary, #e94560) !important;
		}
	}

	// ---- Accent bottom (style 6): lift + image zoom ----
	&--accent-bottom .nexus-tg__card {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2) !important;
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// ---- Social link hover ----
	&__social-link:hover {
		color: var(--nexus-color-secondary, #e94560) !important;
		background: rgba(233, 69, 96, 0.08);
	}

	// ---- Button hover ----
	&__btn:hover {
		opacity: 0.9;
		transform: translateY(-2px);
	}

	// ---- Responsive ----
	@include respond-below(md) {
		padding: 3rem 0 !important;

		&__header {
			margin-bottom: 2rem !important;
		}

		&__grid {
			grid-template-columns: repeat(2, 1fr) !important;
		}

		// Horizontal stays 1 col on tablet.
		&--minimal-row .nexus-tg__grid {
			grid-template-columns: 1fr !important;
		}
	}

	@include respond-below(sm) {
		&__grid {
			grid-template-columns: 1fr !important;
		}
	}
}

// Dark mode overrides for team grid light-bg presets.
.nexus-dark {
	.nexus-tg--clean-cards,
	.nexus-tg--rounded-photo,
	.nexus-tg--minimal-row,
	.nexus-tg--bordered-hover {
		background-color: var(--nexus-bg) !important;

		.nexus-tg__title {
			color: var(--nexus-text-heading) !important;
		}

		.nexus-tg__desc {
			color: var(--nexus-text) !important;
		}

		.nexus-tg__name {
			color: var(--nexus-text-heading) !important;
		}

		.nexus-tg__position {
			color: var(--nexus-text-muted) !important;
		}

		.nexus-tg__bio {
			color: var(--nexus-text) !important;
		}
	}

	.nexus-tg--clean-cards .nexus-tg__card,
	.nexus-tg--rounded-photo .nexus-tg__card,
	.nexus-tg--bordered-hover .nexus-tg__card {
		background: var(--nexus-bg-subtle) !important;
	}

	.nexus-tg--bordered-hover .nexus-tg__card {
		border-color: var(--nexus-border-color) !important;
	}
}
