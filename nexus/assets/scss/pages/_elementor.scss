// =============================================================================
// Elementor Widgets - Nexus Custom Styles
// =============================================================================
@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

// -------------------------------------------------------------------------
// Icon Box
// -------------------------------------------------------------------------
.nexus-icon-box {

	// ---- Stacked (icon above) — card style ----
	&--stacked {
		display: flex;
		flex-direction: column;
		background: var(--nexus-color-white);
		border-radius: 20px;
		border: 1px solid var(--nexus-border-color);
		padding: 2.25rem 2rem;
		height: 100%;
		position: relative;
		overflow: hidden;
		transition: transform 0.32s ease, box-shadow 0.32s ease, border-color 0.32s ease;

		// Subtle top-accent bar that grows on hover
		&::before {
			content: '';
			position: absolute;
			top: 0;
			inset-inline: 0;
			height: 3px;
			background: linear-gradient(90deg, var(--nexus-color-secondary), var(--nexus-color-primary));
			transform: scaleX(0);
			transform-origin: left;
			transition: transform 0.32s ease;
		}

		&:hover {
			transform: translateY(-10px);
			box-shadow: 0 24px 48px rgba(0 0 0 / 0.09);
			border-color: transparent;

			&::before { transform: scaleX(1); }
		}
	}

	// ---- Inline (icon left) ----
	&--inline {
		display: flex;
		align-items: flex-start;
		gap: 1.25rem;

		.nexus-icon-box__icon-wrap { flex-shrink: 0; }
	}

	// ---- Icon wrap ----
	&__icon-wrap {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 64px;
		height: 64px;
		border-radius: 16px;
		background: rgba(233 69 96 / 0.09);
		margin-block-end: 1.5rem;
		flex-shrink: 0;
		transition: background 0.25s ease, transform 0.25s ease;

		.nexus-icon-box--stacked:hover & {
			background: rgba(233 69 96 / 0.14);
			transform: scale(1.08) rotate(-3deg);
		}

		.nexus-icon-box--inline & {
			margin-block-end: 0;
		}
	}

	&__icon {
		font-size: 1.875rem;
		color: var(--nexus-color-secondary);
		display: flex;
		align-items: center;
		line-height: 1;
	}

	// ---- Content ----
	&__content {
		display: flex;
		flex-direction: column;
		flex: 1;
	}

	&__title {
		font-size: 1.125rem;
		font-weight: 700;
		color: var(--nexus-color-primary);
		margin-block: 0 0.6rem;
		line-height: 1.3;

		a {
			color: inherit;
			text-decoration: none;
			transition: color 0.2s ease;

			&:hover { color: var(--nexus-color-secondary); }
		}

		.nexus-icon-box--inline & { margin-block-start: 0; }
	}

	&__desc {
		font-size: 0.9375rem;
		line-height: 1.75;
		color: var(--nexus-color-muted);
		margin: 0;
		flex: 1;
	}

	&__link {
		display: inline-flex;
		align-items: center;
		gap: 0.35rem;
		margin-block-start: 1.25rem;
		font-size: 0.875rem;
		font-weight: 600;
		color: var(--nexus-color-secondary);
		text-decoration: none;
		transition: gap 0.2s ease, color 0.2s ease;

		&::after {
			content: '→';
			transition: transform 0.2s ease;
		}

		&:hover {
			gap: 0.55rem;

			&::after { transform: translateX(3px); }
		}
	}
}

// Icon Box — flex layout fix for Elementor containers
// Elementor Flexbox Container structure: .e-con > .e-con-inner > .elementor-widget
// Both selectors needed: newer Elementor uses .e-con-inner, older may not.
.e-con > .elementor-widget-nexus-icon-box,
.e-con-inner > .elementor-widget-nexus-icon-box {
	flex: 1 1 260px;
	min-width: 0;
}

// Ensure the inner container wraps to multiple rows when needed
.e-con-inner:has(> .elementor-widget-nexus-icon-box) {
	flex-wrap: wrap;
}

// -------------------------------------------------------------------------
// Hero Slider — full-width overrides
// -------------------------------------------------------------------------

// Force the Elementor widget wrapper and its parent container to be full-width.
// This allows the hero to break out of any boxed container.
.elementor-widget-nexus-hero-slider,
.elementor-widget-nexus-hero-slider .elementor-widget-container {
	width: 100%;
	max-width: 100%;
	padding: 0;
	margin: 0;
}

// The Elementor container holding the hero should be padding-free and full-width.
.e-con:has(> .elementor-widget-nexus-hero-slider),
.e-con:has(.elementor-widget-nexus-hero-slider) {
	--container-max-width: 100%;
	padding: 0 !important;
	max-width: 100% !important;
}

// -------------------------------------------------------------------------
// Hero Slider
// -------------------------------------------------------------------------
.nexus-hero-slider {
	position: relative;

	// Bottom-vignette (hidden for certain presets via modifier)
	&::after {
		content: '';
		position: absolute;
		inset-inline: 0;
		bottom: 0;
		height: 45%;
		background: linear-gradient(to top, rgba(0 0 0 / 0.55) 0%, transparent 100%);
		z-index: 1;
		pointer-events: none;
	}

	// Hide vignette for presets that handle their own overlay
	&--creative-split::after,
	&--minimal-center::after,
	&--editorial-bottom::after,
	&--cinematic-dark::after,
	&--bold-startup::after {
		display: none;
	}

	// ---- Base slide styles ----
	.nexus-hero-slide {
		position: relative;
		overflow: hidden;
		background-size: cover;
		background-position: center;
		background-repeat: no-repeat;

		&__overlay {
			position: absolute;
			inset: 0;
		}

		&__container {
			position: relative;
			z-index: 2;
			height: 100%;
			display: flex;
			align-items: center;
		}

		&__content {
			position: relative;
			display: flex;
			flex-direction: column;
			justify-content: center;
			padding: 6rem 2rem;
			color: #fff;
			width: 100%;
		}

		&__actions {
			display: flex;
			gap: 1rem;
			flex-wrap: wrap;

			.nexus-btn {
				transition: all 0.3s ease;
			}

			.nexus-btn--hero-pri:hover {
				opacity: 0.9;
				transform: translateY(-2px);
			}

			.nexus-btn--hero-sec:hover {
				opacity: 0.85;
			}
		}
	}

	// ---- Content alignment variants ----
	&.content-left .nexus-hero-slide__content {
		align-items: flex-start;
		text-align: left;
	}

	&.content-center .nexus-hero-slide__content {
		align-items: center;
		text-align: center;
		.nexus-hero-slide__text { margin-inline: auto; }
	}

	&.content-right .nexus-hero-slide__content {
		align-items: flex-end;
		text-align: right;
		.nexus-hero-slide__text { margin-inline-start: auto; }
	}

	// ---- Default glassmorphism arrows ----
	.swiper-button-prev,
	.swiper-button-next {
		width: 52px;
		height: 52px;
		border-radius: 50%;
		background: rgba(255 255 255 / 0.12);
		backdrop-filter: blur(6px);
		border: 1px solid rgba(255 255 255 / 0.22);
		color: #fff;
		transition: background 0.25s ease, border-color 0.25s ease, transform 0.25s ease;
		z-index: 10;
		margin-top: 0;
		top: 50%;
		transform: translateY(-50%);

		&::after {
			font-size: 1rem;
			font-weight: 700;
			color: #fff;
		}

		&:hover {
			background: var(--nexus-color-secondary);
			border-color: var(--nexus-color-secondary);
			transform: translateY(-50%) scale(1.08);
		}
	}

	.swiper-button-prev { left: 1.75rem; }
	.swiper-button-next { right: 1.75rem; }

	// ---- Default line pagination ----
	&__dots {
		bottom: 1.75rem;
		z-index: 10;

		.swiper-pagination-bullet {
			width: 28px;
			height: 3px;
			border-radius: 2px;
			background: rgba(255 255 255 / 0.4);
			opacity: 1;
			margin: 0 4px;
			transition: width 0.35s ease, background 0.25s ease;
		}

		.swiper-pagination-bullet-active {
			width: 52px;
			background: #fff;
		}
	}

	// ==================================================================
	// 1. Classic Corporate — left gradient, accent bar
	// ==================================================================
	&--classic-corporate {
		.nexus-hero-slide__accent-bar {
			transition: height 0.4s ease;
		}

		&:hover .nexus-hero-slide__accent-bar {
			height: 80px !important;
		}
	}

	// ==================================================================
	// 2. Creative Split — solid panel + image
	// ==================================================================
	&--creative-split {
		.nexus-hero-slide--split {
			display: flex;
			height: 100%;
		}

		.nexus-hero-slide__split-panel {
			flex: 0 0 45%;
			display: flex;
			align-items: center;
			position: relative;
			z-index: 2;
		}

		.nexus-hero-slide__split-image {
			flex: 0 0 55%;
			position: relative;
		}

		// Progress counter
		.nexus-hero-slider__progress {
			position: absolute;
			bottom: 2rem;
			right: 3rem;
			display: flex;
			align-items: center;
			gap: 0.75rem;
			z-index: 10;
			color: rgba(255, 255, 255, 0.5);
			font-size: 0.875rem;
			font-weight: 600;
			letter-spacing: 0.05em;
		}

		.nexus-hero-slider__progress-current {
			color: #fff;
			font-size: 1.125rem;
		}

		.nexus-hero-slider__progress-bar {
			width: 48px;
			height: 2px;
			background: rgba(255, 255, 255, 0.2);
			border-radius: 1px;
			overflow: hidden;

			span {
				display: block;
				width: 50%;
				height: 100%;
				background: var(--nexus-color-secondary);
				border-radius: 1px;
				transition: width 0.3s ease;
			}
		}

		@include respond-below(md) {
			.nexus-hero-slide--split {
				flex-direction: column;
			}

			.nexus-hero-slide__split-panel {
				flex: 0 0 55%;
			}

			.nexus-hero-slide__split-image {
				flex: 0 0 45%;
			}

			.nexus-hero-slide__content {
				padding: 2.5rem 2rem !important;
			}

			.nexus-hero-slider__progress {
				right: 1.5rem;
				bottom: 1rem;
			}
		}
	}

	// ==================================================================
	// 3. Minimal Center — blurred bg, side dots
	// ==================================================================
	&--minimal-center {
		// Vertical dots on the right
		.nexus-hero-slider__side-dots {
			position: absolute;
			right: 2rem;
			top: 50%;
			transform: translateY(-50%);
			z-index: 10;
			display: flex;
			flex-direction: column;
			gap: 10px;

			.swiper-pagination-bullet {
				width: 10px;
				height: 10px;
				border-radius: 50%;
				background: rgba(255, 255, 255, 0.3);
				opacity: 1;
				margin: 0;
				transition: all 0.3s ease;
			}

			.swiper-pagination-bullet-active {
				background: transparent;
				box-shadow: 0 0 0 2px #fff;
				transform: scale(1.2);
			}
		}

		@include respond-below(md) {
			.nexus-hero-slider__side-dots {
				right: 1rem;
				gap: 8px;
			}
		}
	}

	// ==================================================================
	// 4. Editorial Bottom — bottom-anchored, numbered nav
	// ==================================================================
	&--editorial-bottom {
		.nexus-hero-slide__bottom-row {
			.nexus-btn--hero-pri {
				text-decoration: none;

				&:hover {
					text-decoration: underline;
				}
			}
		}

		// Numbered navigation
		.nexus-hero-slider__nav-numbers {
			position: absolute;
			bottom: 2.5rem;
			right: 3rem;
			z-index: 10;
			display: flex;
			align-items: center;
			gap: 0;
		}

		.nexus-hero-slider__nav-num {
			font-size: 0.875rem;
			font-weight: 600;
			color: rgba(255, 255, 255, 0.4);
			cursor: pointer;
			padding: 0.25rem 0.5rem;
			transition: color 0.3s ease;

			&.is-active {
				color: var(--nexus-color-secondary);
				font-weight: 700;
			}

			&:hover {
				color: #fff;
			}
		}

		.nexus-hero-slider__nav-line {
			display: inline-block;
			width: 24px;
			height: 1px;
			background: rgba(255, 255, 255, 0.2);
			margin: 0 0.25rem;
		}

		@include respond-below(md) {
			.nexus-hero-slide__content {
				padding-bottom: 6rem !important;
			}

			.nexus-hero-slide__title {
				font-size: clamp(2rem, 6vw, 3.5rem) !important;
			}

			.nexus-hero-slider__nav-numbers {
				right: 1.5rem;
				bottom: 1.5rem;
			}
		}
	}

	// ==================================================================
	// 5. Cinematic Dark — frame border, Ken Burns, vertical lines
	// ==================================================================
	&--cinematic-dark {
		// Ken Burns on background
		.nexus-hero-slide--cinematic {
			& > *:first-child {
				// The background-image on the slide itself
			}
		}

		.swiper-slide-active.nexus-hero-slide--cinematic {
			animation: nexusKenBurns 15s ease infinite alternate;
		}

		// Vertical line pagination
		.nexus-hero-slider__lines {
			position: absolute;
			bottom: 2rem;
			left: 50%;
			transform: translateX(-50%);
			z-index: 10;
			display: flex;
			gap: 12px;
			align-items: flex-end;

			.swiper-pagination-bullet {
				width: 2px;
				height: 24px;
				border-radius: 1px;
				background: rgba(255, 255, 255, 0.3);
				opacity: 1;
				margin: 0;
				transition: height 0.35s ease, background 0.25s ease;
			}

			.swiper-pagination-bullet-active {
				height: 40px;
				background: var(--nexus-color-secondary);
			}
		}

		.nexus-hero-slide__frame {
			transition: border-color 0.5s ease;
		}

		@include respond-below(md) {
			.nexus-hero-slide__frame {
				inset: 12px !important;
			}

			.nexus-hero-slider__lines {
				bottom: 1.5rem;
			}
		}
	}

	// ==================================================================
	// 6. Bold Startup — geometric shape, gradient CTA
	// ==================================================================
	&--bold-startup {
		.swiper-button-prev,
		.swiper-button-next {
			background: #fff;
			border: none;
			box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);

			&::after {
				color: var(--nexus-color-primary);
			}

			&:hover {
				background: var(--nexus-color-secondary);
				box-shadow: 0 6px 24px rgba(0, 0, 0, 0.25);

				&::after {
					color: #fff;
				}
			}
		}

		.nexus-hero-slide__shape {
			transition: opacity 0.6s ease;
		}
	}

	// ---- Responsive: hide arrows on mobile ----
	@include respond-below(md) {
		.swiper-button-prev,
		.swiper-button-next {
			display: none;
		}

		.nexus-hero-slide__content {
			padding: 4rem 1.5rem !important;
		}
	}
}

// Ken Burns keyframes for cinematic preset
@keyframes nexusKenBurns {
	0% {
		background-size: 100%;
	}

	100% {
		background-size: 112%;
	}
}

// -------------------------------------------------------------------------
// Portfolio Grid
// -------------------------------------------------------------------------
.nexus-portfolio-wrap {}

.nexus-portfolio-filter {
	display: flex;
	gap: 0.5rem;
	flex-wrap: wrap;
	margin-block-end: 2.5rem;

	&__btn {
		display: inline-block;
		padding: 0.4rem 1.1rem;
		border: 1px solid var(--nexus-border-color);
		border-radius: 100px;
		background: transparent;
		cursor: pointer;
		font-size: 0.875rem;
		color: var(--nexus-text-color);
		transition: all var(--nexus-transition-fast);

		&:hover,
		&.is-active {
			background-color: var(--nexus-primary);
			border-color: var(--nexus-primary);
			color: #fff;
		}
	}
}

.nexus-portfolio-grid {
	display: grid;
	grid-template-columns: repeat(var(--nexus-portfolio-cols, 3), 1fr);
	gap: 1.5rem;

	@include respond-below(md) { grid-template-columns: repeat(2, 1fr); }
	@include respond-below(sm) { grid-template-columns: 1fr; }
}

.nexus-portfolio-item {
	position: relative;
	border-radius: var(--nexus-border-radius);
	overflow: hidden;

	&__img-wrap {
		position: relative;
		overflow: hidden;

		img {
			position: absolute;
			inset: 0;
			width: 100%;
			height: 100%;
			object-fit: cover;
			transition: transform var(--nexus-transition-base);
		}
	}

	&:hover &__img-wrap img {
		transform: scale(1.06);
	}

	&__overlay {
		position: absolute;
		inset: 0;
		display: flex;
		align-items: center;
		justify-content: center;
		opacity: 0;
		transition: opacity var(--nexus-transition-base);
		font-size: 1.75rem;
		color: #fff;
	}

	&:hover &__overlay {
		opacity: 1;
	}

	&__info {
		padding: 1rem;
		background-color: var(--nexus-bg);
	}

	&__cat {
		font-size: 0.75rem;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		color: var(--nexus-primary);
		display: block;
		margin-block-end: 0.25rem;
	}

	&__title {
		font-size: 1rem;
		margin: 0;
	}

	&__link { text-decoration: none; color: inherit; }
}

// -------------------------------------------------------------------------
// Testimonials
// -------------------------------------------------------------------------
.nexus-testimonials {
	&--slider { overflow: hidden; }

	&__dots {
		margin-block-start: 1.5rem;
		text-align: center;
	}
}

.nexus-testimonials-grid {
	display: grid;
	grid-template-columns: repeat(var(--nexus-testimonials-cols, 3), 1fr);
	gap: 1.5rem;

	@include respond-below(md) { grid-template-columns: repeat(2, 1fr); }
	@include respond-below(sm) { grid-template-columns: 1fr; }
}

.nexus-testimonial-card {
	background-color: var(--nexus-bg);
	border: 1px solid var(--nexus-border-color);
	border-radius: var(--nexus-border-radius-lg);
	padding: 2rem;
	position: relative;
	transition: box-shadow var(--nexus-transition-base);

	&:hover {
		box-shadow: var(--nexus-shadow-md);
	}

	&__quote {
		font-size: 3.5rem;
		line-height: 0.75;
		color: var(--nexus-primary);
		font-family: Georgia, serif;
		margin-block-end: 0.75rem;
		opacity: 0.4;
	}

	&__stars {
		display: flex;
		gap: 0.15rem;
		margin-block-end: 0.75rem;
	}

	&__star { color: #f5a623; font-size: 0.875rem;
		&.is-empty { color: var(--nexus-border-color); }
	}

	&__text {
		font-size: 0.9375rem;
		line-height: 1.75;
		color: var(--nexus-text-secondary);
		margin-block-end: 1.5rem;
		font-style: italic;
	}

	&__author {
		display: flex;
		align-items: center;
		gap: 0.875rem;
	}

	&__avatar {
		flex-shrink: 0;

		img {
			width: 48px;
			height: 48px;
			border-radius: 50%;
			object-fit: cover;
		}
	}

	&__name {
		display: block;
		font-weight: 700;
		font-size: 0.9375rem;
	}

	&__position {
		display: block;
		font-size: 0.8125rem;
		color: var(--nexus-text-muted);
	}
}

// -------------------------------------------------------------------------
// Team
// -------------------------------------------------------------------------
.nexus-team-grid {
	display: grid;
	grid-template-columns: repeat(var(--nexus-team-cols, 4), 1fr);
	gap: 1.875rem;

	@include respond-below(lg) { grid-template-columns: repeat(3, 1fr); }
	@include respond-below(md) { grid-template-columns: repeat(2, 1fr); }
	@include respond-below(sm) { grid-template-columns: 1fr; }
}

.nexus-team-member {
	&__img-wrap {
		position: relative;
		overflow: hidden;
		border-radius: var(--nexus-border-radius-lg);
		aspect-ratio: 3/4;

		img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			transition: transform var(--nexus-transition-base);
		}
	}

	&:hover &__img-wrap img {
		transform: scale(1.05);
	}

	&__overlay {
		position: absolute;
		inset: 0;
		background: rgba(0 0 0 / 0.55);
		display: flex;
		align-items: flex-end;
		justify-content: center;
		padding-block-end: 1.5rem;
		opacity: 0;
		transition: opacity var(--nexus-transition-base);
	}

	&:hover &__overlay { opacity: 1; }

	&__info {
		padding-block-start: 1rem;
	}

	&__name {
		font-size: 1.0625rem;
		margin-block-end: 0.2rem;
	}

	&__position {
		display: block;
		font-size: 0.875rem;
		color: var(--nexus-primary);
		font-weight: 500;
	}

	&__bio {
		font-size: 0.875rem;
		color: var(--nexus-text-secondary);
		line-height: 1.65;
		margin-block-start: 0.5rem;
	}

	&__social {
		display: flex;
		gap: 0.6rem;
		margin-block-start: 0.75rem;

		a {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			width: 2rem;
			height: 2rem;
			border-radius: 50%;
			background-color: rgba(255 255 255 / 15%);
			color: #fff;
			font-size: 0.875rem;
			transition: background-color var(--nexus-transition-fast);
			text-decoration: none;

			&:hover { background-color: var(--nexus-primary); }
		}
	}
}

// -------------------------------------------------------------------------
// Services Grid — 6 Radically Different Presets
// -------------------------------------------------------------------------

// --- Shared: Section header ---
.nexus-sg__header {
	margin-block-end: 3rem;

	&--center { text-align: center; }
	&--left { text-align: left; }
}

.nexus-sg__tagline {
	display: inline-block;
	font-size: 0.8125rem;
	font-weight: 700;
	letter-spacing: 0.15em;
	text-transform: uppercase;
	margin-block-end: 0.75rem;
}

.nexus-sg__heading {
	font-size: clamp(1.75rem, 3vw, 2.5rem);
	font-weight: 800;
	line-height: 1.2;
	margin: 0 0 1rem;
}

.nexus-sg__subheading {
	font-size: 1.0625rem;
	line-height: 1.7;
	margin: 0 auto;
	max-width: 640px;
	opacity: 0.8;

	.nexus-sg__header--left & { margin-inline: 0; }
}

// --- Shared: Section header colors via CSS vars ---
.nexus-sg {
	.nexus-sg__tagline { color: var(--sg-icon-color, var(--sg-link, var(--nexus-color-secondary))); }
	.nexus-sg__heading { color: var(--sg-heading, var(--nexus-heading-color)); }
	.nexus-sg__subheading { color: var(--sg-text, var(--nexus-text-secondary, #495057)); }
}

// --- Shared: Grid ---
.nexus-sg__grid {
	display: grid;
	grid-template-columns: repeat(var(--nexus-sg-cols, 3), 1fr);
	gap: 1.875rem;

	@include respond-below(md) { grid-template-columns: repeat(2, 1fr); }
	@include respond-below(sm) { grid-template-columns: 1fr; }
}

// =====================================================================
// 1. CLEAN MINIMAL — Simple white cards, round icon, lift hover
// =====================================================================
.nexus-sg-card--clean {
	display: block;
	padding: 2.25rem 2rem;
	border-radius: 16px;
	background: var(--sg-card-bg, var(--nexus-surface, #f1f3f5));
	border: 1px solid var(--sg-border, var(--nexus-border-color, #e9ecef));
	text-decoration: none;
	color: inherit;
	transition: transform 0.35s ease, box-shadow 0.35s ease, border-color 0.35s ease;

	.nexus-sg-card__icon-wrap {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 64px;
		height: 64px;
		border-radius: 50%;
		margin-block-end: 1.25rem;
		background: var(--sg-icon-bg, var(--nexus-surface, #f1f3f5));
	}

	.nexus-sg-card__icon {
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 26px;
		color: var(--sg-icon-color, var(--nexus-color-secondary));
	}

	.nexus-sg-card__title {
		font-size: 1.125rem;
		font-weight: 700;
		margin: 0 0 0.5rem;
		line-height: 1.3;
		color: var(--sg-heading, var(--nexus-heading-color));
	}

	.nexus-sg-card__desc {
		font-size: 0.9375rem;
		line-height: 1.7;
		margin: 0;
		color: var(--sg-text, var(--nexus-text-secondary, #495057));
	}

	.nexus-sg-card__link {
		display: inline-flex;
		align-items: center;
		gap: 0.35rem;
		margin-block-start: 1.25rem;
		font-size: 0.875rem;
		font-weight: 600;
		text-decoration: none;
		color: var(--sg-link, var(--nexus-color-secondary));
		transition: gap 0.3s ease;

		&:hover { gap: 0.6rem; }
	}

	&:hover {
		transform: translateY(-8px);
		box-shadow: 0 24px 48px rgba(0, 0, 0, 0.08);
		border-color: transparent;
	}
}

// =====================================================================
// 2. CORPORATE NUMBERED — Big step numbers, left accent bar, structured
// =====================================================================
.nexus-sg-card--numbered {
	display: block;
	position: relative;
	padding: 2rem 2rem 2rem 2.5rem;
	border-radius: 4px;
	background: var(--sg-card-bg, var(--nexus-surface, #f1f3f5));
	border: 1px solid var(--sg-border, var(--nexus-border-color, #e9ecef));
	text-decoration: none;
	color: inherit;
	overflow: hidden;
	transition: transform 0.3s ease, box-shadow 0.3s ease;

	.nexus-sg-card__accent-bar {
		position: absolute;
		top: 0;
		bottom: 0;
		inset-inline-start: 0;
		width: 4px;
		background: var(--sg-accent, var(--nexus-color-secondary));
		transition: width 0.3s ease;
	}

	.nexus-sg-card__number {
		position: absolute;
		top: -10px;
		inset-inline-end: 12px;
		font-size: 5rem;
		font-weight: 900;
		line-height: 1;
		pointer-events: none;
		user-select: none;
		color: var(--sg-number, var(--nexus-border-color));
	}

	.nexus-sg-card__top {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		margin-block-end: 0.75rem;
		position: relative;
		z-index: 1;
	}

	.nexus-sg-card__icon--small {
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 22px;
		flex-shrink: 0;
		color: var(--sg-icon-color, var(--nexus-color-secondary));
	}

	.nexus-sg-card__title {
		font-size: 1.0625rem;
		font-weight: 700;
		margin: 0;
		line-height: 1.3;
		color: var(--sg-heading, var(--nexus-heading-color));
	}

	.nexus-sg-card__desc {
		font-size: 0.9375rem;
		line-height: 1.65;
		margin: 0;
		position: relative;
		z-index: 1;
		color: var(--sg-text, var(--nexus-text-secondary, #495057));
	}

	.nexus-sg-card__link {
		display: inline-flex;
		align-items: center;
		gap: 0.3rem;
		margin-block-start: 1rem;
		font-size: 0.8125rem;
		font-weight: 600;
		text-decoration: none;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		position: relative;
		z-index: 1;
		color: var(--sg-link, var(--nexus-color-secondary));
	}

	&:hover {
		transform: translateY(-4px);
		box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);

		.nexus-sg-card__accent-bar { width: 6px; }
	}
}

// =====================================================================
// 3. FLIP HOVER — White cards that transform to color on hover
// =====================================================================
.nexus-sg-card--flip {
	display: block;
	position: relative;
	padding: 2.5rem 2rem;
	border-radius: 20px;
	background: var(--sg-card-bg, var(--nexus-surface, #f1f3f5));
	border: 1px solid var(--sg-border, var(--nexus-border-color, #e9ecef));
	text-decoration: none;
	color: inherit;
	text-align: center;
	overflow: hidden;
	transition: background 0.45s ease, border-color 0.45s ease, transform 0.35s ease, box-shadow 0.35s ease;

	.nexus-sg-card__icon-wrap--flip {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 80px;
		height: 80px;
		border-radius: 24px;
		margin: 0 auto 1.5rem;
		background: var(--sg-icon-bg, var(--nexus-surface, #f1f3f5));
		transition: background 0.45s ease, transform 0.3s ease;
	}

	.nexus-sg-card__icon--large {
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 36px;
		color: var(--sg-icon-color, var(--nexus-color-secondary));
		transition: color 0.45s ease;
	}

	.nexus-sg-card__title {
		font-size: 1.25rem;
		font-weight: 700;
		margin: 0 0 0.75rem;
		line-height: 1.3;
		color: var(--sg-heading, var(--nexus-heading-color));
		transition: color 0.45s ease;
	}

	.nexus-sg-card__desc {
		font-size: 0.9375rem;
		line-height: 1.7;
		margin: 0;
		color: var(--sg-text, var(--nexus-text-secondary, #495057));
		transition: color 0.45s ease;
	}

	.nexus-sg-card__flip-arrow {
		position: absolute;
		top: 1.25rem;
		inset-inline-end: 1.25rem;
		width: 40px;
		height: 40px;
		display: flex;
		align-items: center;
		justify-content: center;
		border-radius: 50%;
		background: rgba(255, 255, 255, 0.25);
		color: #ffffff;
		font-size: 1.25rem;
		opacity: 0;
		transform: scale(0.5);
		transition: opacity 0.35s ease, transform 0.35s ease;
	}

	&:hover {
		background: var(--sg-card-bg-hover, var(--nexus-color-secondary));
		border-color: transparent;
		transform: translateY(-6px);
		box-shadow: 0 24px 48px rgba(0, 0, 0, 0.15);

		.nexus-sg-card__icon-wrap--flip {
			background: rgba(255, 255, 255, 0.2) !important;
			transform: scale(1.05);
		}

		.nexus-sg-card__icon--large { color: #ffffff !important; }
		.nexus-sg-card__title { color: #ffffff !important; }
		.nexus-sg-card__desc { color: rgba(255, 255, 255, 0.85) !important; }
		.nexus-sg-card__flip-arrow { opacity: 1; transform: scale(1); }
	}
}

// =====================================================================
// 4. HORIZONTAL LIST — Full-width rows, completely different layout
// =====================================================================
.nexus-sg__list {
	display: flex;
	flex-direction: column;
}

.nexus-sg-row {
	display: flex;
	align-items: center;
	gap: 2rem;
	padding: 2rem 0;
	text-decoration: none;
	color: inherit;
	border-bottom: 1px solid var(--sg-border, var(--nexus-border-color, #e9ecef));
	transition: padding-inline-start 0.3s ease;

	&__number {
		font-size: 2.5rem;
		font-weight: 900;
		line-height: 1;
		flex-shrink: 0;
		width: 60px;
		text-align: center;
		color: var(--sg-number, var(--nexus-border-color));
	}

	&__icon-wrap {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 56px;
		height: 56px;
		border-radius: 14px;
		flex-shrink: 0;
		background: var(--sg-icon-bg, var(--nexus-color-secondary));
	}

	&__icon {
		display: flex;
		align-items: center;
		justify-content: center;
		font-size: 22px;
		color: var(--sg-icon-color, #ffffff);
	}

	&__body {
		flex: 1;
		min-width: 0;
	}

	&__title {
		font-size: 1.125rem;
		font-weight: 700;
		margin: 0 0 0.25rem;
		line-height: 1.3;
		color: var(--sg-heading, var(--nexus-heading-color));
	}

	&__desc {
		font-size: 0.9375rem;
		line-height: 1.6;
		margin: 0;
		color: var(--sg-text, var(--nexus-text-secondary, #495057));
	}

	&__arrow {
		flex-shrink: 0;
		font-size: 1.5rem;
		opacity: 0;
		transform: translateX(-10px);
		transition: opacity 0.3s ease, transform 0.3s ease;
		color: var(--sg-link, var(--nexus-color-secondary));
	}

	&:hover {
		padding-inline-start: 1rem;

		.nexus-sg-row__arrow {
			opacity: 1;
			transform: translateX(0);
		}
	}

	@include respond-below(sm) {
		flex-wrap: wrap;
		gap: 1rem;

		&__number { display: none; }
		&__body { flex-basis: calc(100% - 72px); }
		&__arrow { display: none; }
	}
}

// =====================================================================
// 5. OVERLAPPING ICON — Icon floats above the card's top edge
// =====================================================================
.nexus-sg__grid--overlap {
	padding-block-start: 40px;
}

.nexus-sg-card--overlap {
	display: flex;
	flex-direction: column;
	align-items: center;
	text-decoration: none;
	color: inherit;
	position: relative;

	.nexus-sg-card__icon-wrap--overlap {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 80px;
		height: 80px;
		border-radius: 50%;
		position: relative;
		z-index: 2;
		margin-block-end: -40px;
		background: var(--sg-icon-bg, var(--nexus-color-secondary));
		box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
		transition: transform 0.35s ease, box-shadow 0.35s ease;

		.nexus-sg-card__icon {
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 30px;
			color: var(--sg-icon-color, #ffffff);
		}
	}

	.nexus-sg-card__content {
		text-align: center;
		padding: 3.5rem 2rem 2rem;
		border-radius: 20px;
		width: 100%;
		background: var(--sg-card-bg, var(--nexus-surface, #f1f3f5));
		border: 1px solid var(--sg-border, var(--nexus-border-color, #e9ecef));
		box-shadow: var(--sg-shadow, 0 8px 30px rgba(0, 0, 0, 0.08));
		transition: transform 0.35s ease, box-shadow 0.35s ease;
	}

	.nexus-sg-card__title {
		font-size: 1.125rem;
		font-weight: 700;
		margin: 0 0 0.75rem;
		line-height: 1.3;
		color: var(--sg-heading, var(--nexus-heading-color));
	}

	.nexus-sg-card__desc {
		font-size: 0.9375rem;
		line-height: 1.7;
		margin: 0;
		color: var(--sg-text, var(--nexus-text-secondary, #495057));
	}

	.nexus-sg-card__link {
		display: inline-flex;
		align-items: center;
		gap: 0.35rem;
		margin-block-start: 1.25rem;
		font-size: 0.875rem;
		font-weight: 600;
		text-decoration: none;
		color: var(--sg-link, var(--nexus-color-secondary));
		transition: gap 0.3s ease;

		&:hover { gap: 0.6rem; }
	}

	&:hover {
		.nexus-sg-card__icon-wrap--overlap {
			transform: translateY(-6px) scale(1.08);
			box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);
		}

		.nexus-sg-card__content {
			transform: translateY(-4px);
			box-shadow: 0 24px 48px rgba(0, 0, 0, 0.1) !important;
		}
	}
}

// =====================================================================
// 6. DARK GLASSMORPHISM — Dark bg, glass cards, glow icon, neon line
// =====================================================================
.nexus-sg--dark-glass {
	padding: 4rem 2rem;
	border-radius: 24px;
	background: var(--sg-section-bg, var(--nexus-color-dark));
	--sg-heading: var(--nexus-color-white);
	--sg-text: var(--nexus-text-muted);

	.e-con-full > .elementor-widget-wrap > .elementor-widget > .elementor-widget-container > &,
	.e-con-full > .elementor-widget > .elementor-widget-container > & {
		border-radius: 0;
	}

	.nexus-sg__subheading { max-width: 540px; }
}

.nexus-sg-card--glass {
	display: block;
	position: relative;
	padding: 2.5rem 2rem;
	border-radius: 20px;
	background: var(--sg-card-bg, rgba(255, 255, 255, 0.05));
	border: 1px solid var(--sg-card-border, rgba(255, 255, 255, 0.08));
	backdrop-filter: blur(12px);
	-webkit-backdrop-filter: blur(12px);
	text-decoration: none;
	color: inherit;
	overflow: hidden;
	transition: transform 0.35s ease, box-shadow 0.35s ease, border-color 0.35s ease;

	.nexus-sg-card__icon--glow {
		display: block;
		font-size: 44px;
		margin-block-end: 1.5rem;
		color: var(--sg-icon-color, var(--nexus-color-secondary));
		filter: drop-shadow(0 0 8px rgba(var(--nexus-secondary-rgb), 0.3));
		transition: filter 0.35s ease, transform 0.3s ease;
	}

	.nexus-sg-card__title {
		font-size: 1.25rem;
		font-weight: 700;
		margin: 0 0 0.75rem;
		line-height: 1.3;
		color: var(--sg-heading, #ffffff);
	}

	.nexus-sg-card__desc {
		font-size: 0.9375rem;
		line-height: 1.7;
		margin: 0;
		color: var(--sg-text, rgba(255, 255, 255, 0.55));
	}

	.nexus-sg-card__glass-line {
		height: 2px;
		width: 40px;
		border-radius: 1px;
		margin-block: 1.25rem;
		opacity: 0.5;
		background: var(--sg-glow, var(--nexus-color-secondary));
		transition: width 0.35s ease, opacity 0.35s ease;
	}

	.nexus-sg-card__link {
		display: inline-flex;
		align-items: center;
		gap: 0.35rem;
		font-size: 0.875rem;
		font-weight: 600;
		text-decoration: none;
		color: var(--sg-link, var(--nexus-color-secondary));
		transition: gap 0.3s ease;

		&:hover { gap: 0.6rem; }
	}

	&::before {
		content: '';
		position: absolute;
		top: 0;
		inset-inline: 0;
		height: 1px;
		background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
	}

	&:hover {
		transform: translateY(-6px);
		border-color: rgba(var(--nexus-secondary-rgb), 0.3) !important;
		box-shadow: 0 0 40px rgba(var(--nexus-secondary-rgb), 0.1), 0 24px 48px rgba(0, 0, 0, 0.3);

		.nexus-sg-card__icon--glow {
			filter: drop-shadow(0 0 20px rgba(var(--nexus-secondary-rgb), 0.6));
			transform: scale(1.1);
		}

		.nexus-sg-card__glass-line { width: 60px; opacity: 1; }
	}
}

// --- Inverse theme system ---
// Odd variants (1, 3, 5): light in light mode → dark in dark mode
// Even variants (2, 4, 6): dark in light mode → light in dark mode
//
// Light-mode reference values captured here so inverted variants
// can access them even when .nexus-dark overrides the originals.
.nexus-sg {
	--sg-ref-surface: var(--nexus-surface);
	--sg-ref-border: var(--nexus-border-color);
	--sg-ref-heading: var(--nexus-heading-color);
	--sg-ref-text: var(--nexus-text-secondary);
	--sg-ref-bg: var(--nexus-bg);
}

// ---- Light mode: dark-first base for variants 2 & 4 ----

.nexus-sg--corporate-numbered {
	padding: 4rem 2rem;
	border-radius: 24px;
	background: var(--nexus-color-dark);
	--sg-card-bg: rgba(255, 255, 255, 0.04);
	--sg-border: rgba(255, 255, 255, 0.08);
	--sg-heading: var(--nexus-color-white);
	--sg-text: var(--nexus-text-muted);
	--sg-number: rgba(255, 255, 255, 0.06);

	.e-con-full > .elementor-widget-wrap > .elementor-widget > .elementor-widget-container > &,
	.e-con-full > .elementor-widget > .elementor-widget-container > & {
		border-radius: 0;
	}
}

.nexus-sg--horizontal-list {
	padding: 4rem 2rem;
	border-radius: 24px;
	background: var(--nexus-color-dark);
	--sg-border: rgba(255, 255, 255, 0.1);
	--sg-heading: var(--nexus-color-white);
	--sg-text: var(--nexus-text-muted);
	--sg-number: rgba(255, 255, 255, 0.06);

	.e-con-full > .elementor-widget-wrap > .elementor-widget > .elementor-widget-container > &,
	.e-con-full > .elementor-widget > .elementor-widget-container > & {
		border-radius: 0;
	}
}

// ---- Dark mode: per-variant overrides ----

// 1. Clean Minimal (→ dark)
.nexus-dark .nexus-sg--clean-minimal {
	--sg-card-bg: var(--nexus-surface);
	--sg-border: var(--nexus-border-color);
	--sg-heading: var(--nexus-heading-color);
	--sg-text: var(--nexus-text-secondary);
	--sg-icon-bg: rgba(255, 255, 255, 0.06);
}

// 3. Flip Hover (→ dark, hover inverts to light)
.nexus-dark .nexus-sg--flip-hover {
	--sg-card-bg: var(--nexus-surface);
	--sg-border: var(--nexus-border-color);
	--sg-heading: var(--nexus-heading-color);
	--sg-text: var(--nexus-text-secondary);
	--sg-icon-bg: rgba(255, 255, 255, 0.06);

	.nexus-sg-card--flip:hover {
		background: var(--sg-ref-bg);
		border-color: var(--sg-ref-border);
		box-shadow: 0 24px 48px rgba(0, 0, 0, 0.25);

		.nexus-sg-card__icon-wrap--flip { background: var(--sg-ref-surface) !important; }
		.nexus-sg-card__icon--large { color: var(--sg-icon-color, var(--nexus-color-secondary)) !important; }
		.nexus-sg-card__title { color: var(--nexus-color-primary) !important; }
		.nexus-sg-card__desc { color: var(--sg-ref-text) !important; }
	}
}

// 5. Overlapping Icon (→ dark)
.nexus-dark .nexus-sg--overlapping-icon {
	--sg-card-bg: var(--nexus-surface);
	--sg-border: var(--nexus-border-color);
	--sg-heading: var(--nexus-heading-color);
	--sg-text: var(--nexus-text-secondary);
	--sg-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
}

// 2. Corporate Numbered (→ light)
.nexus-dark .nexus-sg--corporate-numbered {
	background: var(--sg-ref-surface);
	--sg-card-bg: var(--sg-ref-bg);
	--sg-border: var(--sg-ref-border);
	--sg-heading: var(--nexus-color-primary);
	--sg-text: var(--sg-ref-text);
	--sg-number: rgba(0, 0, 0, 0.05);
}

// 4. Horizontal List (→ light)
.nexus-dark .nexus-sg--horizontal-list {
	background: var(--sg-ref-surface);
	--sg-border: var(--sg-ref-border);
	--sg-heading: var(--nexus-color-primary);
	--sg-text: var(--sg-ref-text);
	--sg-number: rgba(0, 0, 0, 0.05);
}

// 6. Dark Glass (→ light glass)
.nexus-dark .nexus-sg--dark-glass {
	background: var(--sg-ref-surface);
	--sg-heading: var(--nexus-color-primary);
	--sg-text: var(--sg-ref-text);

	.nexus-sg-card--glass {
		background: rgba(0, 0, 0, 0.02);
		border-color: rgba(0, 0, 0, 0.06);

		&::before {
			background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.05), transparent);
		}

		&:hover {
			border-color: rgba(var(--nexus-secondary-rgb), 0.2) !important;
			box-shadow: 0 0 40px rgba(var(--nexus-secondary-rgb), 0.06), 0 24px 48px rgba(0, 0, 0, 0.05);
		}
	}

	.nexus-sg-card__glass-line { opacity: 0.7; }
}

// -------------------------------------------------------------------------
// Pricing Table
// -------------------------------------------------------------------------
.nexus-pricing-table {
	background-color: var(--nexus-bg);
	border: 1px solid var(--nexus-border-color);
	border-radius: var(--nexus-border-radius-xl, 1rem);
	overflow: hidden;
	position: relative;
	transition: transform var(--nexus-transition-base), box-shadow var(--nexus-transition-base);

	&:hover {
		transform: translateY(-4px);
		box-shadow: var(--nexus-shadow-lg);
	}

	&--featured {
		border-color: var(--nexus-primary);
		box-shadow: 0 0 0 3px rgba(var(--nexus-primary-rgb), 0.15);
	}

	&__badge {
		position: absolute;
		top: 1rem;
		inset-inline-end: 1rem;
		background-color: var(--nexus-primary);
		color: #fff;
		font-size: 0.75rem;
		font-weight: 700;
		padding: 0.25rem 0.75rem;
		border-radius: 100px;
		text-transform: uppercase;
		letter-spacing: 0.05em;
	}

	&__header {
		padding: 2rem;
		text-align: center;
		border-block-end: 1px solid var(--nexus-border-color);
	}

	&__icon {
		font-size: 2rem;
		color: var(--nexus-primary);
		margin-block-end: 0.75rem;
	}

	&__plan-name {
		font-size: 1.125rem;
		margin-block-end: 0.25rem;
	}

	&__plan-desc {
		font-size: 0.875rem;
		color: var(--nexus-text-muted);
		margin-block-end: 1.5rem;
	}

	&__price-wrap {
		display: flex;
		align-items: baseline;
		justify-content: center;
		flex-wrap: wrap;
		gap: 0.25rem;
	}

	&__price {
		display: flex;
		align-items: baseline;
	}

	&__currency {
		font-size: 1.25rem;
		font-weight: 700;
		align-self: flex-start;
		margin-block-start: 0.5rem;
	}

	&__amount {
		font-size: 3rem;
		font-weight: 800;
		line-height: 1;
		color: var(--nexus-heading-color);
	}

	&__original {
		font-size: 1rem;
		color: var(--nexus-text-muted);
		text-decoration: line-through;
	}

	&__period {
		font-size: 0.875rem;
		color: var(--nexus-text-muted);
		width: 100%;
		text-align: center;
		margin-block-start: 0.25rem;
	}

	&__features {
		padding: 1.5rem 2rem;

		ul {
			list-style: none;
			padding: 0;
			margin: 0;
		}
	}

	&__feature {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		padding-block: 0.6rem;
		border-block-end: 1px solid var(--nexus-border-color);
		font-size: 0.9375rem;

		&:last-child { border-block-end: none; }

		&.is-unavailable {
			color: var(--nexus-text-muted);
			text-decoration: line-through;

			.nexus-pricing-table__feature-icon { color: var(--nexus-text-muted); }
		}
	}

	&__feature-icon {
		color: var(--nexus-success, #22c55e);
		font-weight: 700;
		font-size: 0.875rem;
		flex-shrink: 0;
	}

	&__footer {
		padding: 1.5rem 2rem;
	}
}

// -------------------------------------------------------------------------
// Counter (multi-item widget, .nexus-cnt prefix)
// -------------------------------------------------------------------------

// Preset 3: Icon Cards — card hover lift
.nexus-cnt--icon-cards .nexus-cnt__card {
	transition: transform 0.3s ease, box-shadow 0.3s ease;

	&:hover {
		transform: translateY(-4px);
		box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
	}
}

// Mobile: reduce padding and font sizes, but keep items in one row
.nexus-cnt {
	@media (max-width: 768px) {
		padding-left: 1rem !important;
		padding-right: 1rem !important;
	}
}

.nexus-cnt__grid {
	@media (max-width: 768px) {
		gap: 1rem !important;
	}
}

.nexus-cnt__item,
.nexus-cnt__card {
	@media (max-width: 768px) {
		padding: 1rem 0.5rem !important;
		min-width: 0 !important;
	}
}

.nexus-cnt__number {
	@media (max-width: 480px) {
		font-size: clamp(1.5rem, 8vw, 2.25rem) !important;
	}
}

.nexus-cnt__prefix,
.nexus-cnt__suffix {
	@media (max-width: 480px) {
		font-size: 1rem !important;
	}
}

.nexus-cnt__label {
	@media (max-width: 480px) {
		font-size: 0.6875rem !important;
		letter-spacing: 0.04em !important;
	}
}

.nexus-cnt__icon {
	@media (max-width: 480px) {
		font-size: 1.5rem !important;
		margin-bottom: 0.5rem !important;
	}
}

.nexus-cnt__icon-wrap {
	@media (max-width: 480px) {
		width: 48px !important;
		height: 48px !important;
		margin-bottom: 0.75rem !important;
	}
}

// Counter — dark mode overrides for light-bg presets
html.nexus-dark {
	.nexus-cnt--minimal-row,
	.nexus-cnt--accent-top,
	.nexus-cnt--circle-icon {
		.nexus-cnt__number { color: #fff !important; }
		.nexus-cnt__label { color: rgba(255, 255, 255, 0.6) !important; }
		.nexus-cnt__headline { color: #fff !important; }
	}

	.nexus-cnt--icon-cards {
		background-color: var(--nexus-bg-subtle, #1e1e2e) !important;

		.nexus-cnt__card {
			background: var(--nexus-surface, #252538) !important;
			box-shadow: 0 2px 16px rgba(0, 0, 0, 0.2);
		}

		.nexus-cnt__number { color: #fff !important; }
		.nexus-cnt__label { color: rgba(255, 255, 255, 0.6) !important; }
		.nexus-cnt__headline { color: #fff !important; }
	}

	.nexus-cnt--circle-icon {
		background-color: var(--nexus-bg-subtle, #1e1e2e) !important;

		.nexus-cnt__icon-wrap {
			background: rgba(233, 69, 96, 0.15) !important;
		}
	}
}

// -------------------------------------------------------------------------
// CTA Banner
// -------------------------------------------------------------------------
.nexus-cta-banner {
	// Scoped CSS vars — each preset overrides these, dark mode overrides light presets.
	--cta-bg: var(--nexus-color-light);
	--cta-heading: var(--nexus-color-primary);
	--cta-text: var(--nexus-text-secondary);
	--cta-tagline: var(--nexus-color-secondary);
	--cta-note: var(--nexus-text-muted);

	padding: 5rem 2rem;
	position: relative;
	background-color: var(--cta-bg);

	&__inner {
		max-width: var(--nexus-container-max-width);
		margin-inline: auto;
	}

	&__text { flex: 1; }

	&__tagline {
		font-size: 0.875rem;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.08em;
		margin-block-end: 0.5rem;
		color: var(--cta-tagline);
	}

	&__headline {
		font-size: clamp(1.5rem, 3vw, 2.5rem);
		font-weight: 700;
		line-height: 1.25;
		margin-block-end: 0.75rem;
		color: var(--cta-heading);
	}

	&__desc {
		font-size: 1rem;
		line-height: 1.7;
		margin-block-end: 0;
		max-width: 560px;
		color: var(--cta-text);
	}

	&__actions {
		display: flex;
		gap: 1rem;
		flex-wrap: wrap;
		margin-block-start: 1.5rem;
	}

	&__note {
		font-size: 0.8125rem;
		margin-block-start: 1rem;
		color: var(--cta-note);
	}

	// ----- Style 1: Centered Minimal (Light) -----
	&--centered-light {
		text-align: center;

		.nexus-cta-banner__desc { margin-inline: auto; }
		.nexus-cta-banner__actions { justify-content: center; }
	}

	// ----- Style 2: Centered Dark -----
	&--centered-dark {
		--cta-bg: var(--nexus-color-primary);
		--cta-heading: var(--nexus-color-white);
		--cta-text: var(--nexus-text-muted);
		text-align: center;

		.nexus-cta-banner__desc { margin-inline: auto; }
		.nexus-cta-banner__actions { justify-content: center; }
		.nexus-cta-banner__note { text-align: center; }
	}

	// ----- Style 3: Side by Side -----
	&--side-by-side {
		.nexus-cta-banner__inner {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 2.5rem;
			flex-wrap: wrap;
		}

		.nexus-cta-banner__actions {
			margin-block-start: 0;
			flex-shrink: 0;
		}
	}

	// ----- Style 4: Gradient -----
	&--gradient {
		--cta-heading: var(--nexus-color-white);
		--cta-text: rgba(255, 255, 255, 0.85);
		--cta-tagline: rgba(255, 255, 255, 0.7);
		background: linear-gradient(135deg, var(--nexus-color-secondary), var(--nexus-color-accent));
		text-align: center;

		.nexus-cta-banner__desc { margin-inline: auto; }
		.nexus-cta-banner__actions { justify-content: center; }
	}

	// ----- Style 5: Image + Overlay -----
	&--image-overlay {
		--cta-bg: transparent;
		--cta-heading: var(--nexus-color-white);
		--cta-text: rgba(255, 255, 255, 0.85);
		background-size: cover;
		background-position: center;
		text-align: center;

		&::before {
			content: '';
			position: absolute;
			inset: 0;
			background-color: rgba(26, 26, 46, 0.8);
			z-index: 0;
		}

		.nexus-cta-banner__inner { position: relative; z-index: 1; }
		.nexus-cta-banner__desc { margin-inline: auto; }
		.nexus-cta-banner__actions { justify-content: center; }
	}

	// ----- Style 6: Split with Accent Bar -----
	&--split-accent {
		--cta-bg: var(--nexus-color-primary);
		--cta-heading: var(--nexus-color-white);
		--cta-text: var(--nexus-text-muted);

		.nexus-cta-banner__inner {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 2.5rem;
			flex-wrap: wrap;
			border-inline-start: 4px solid var(--nexus-primary);
			padding-inline-start: 2rem;
		}

		.nexus-cta-banner__actions {
			margin-block-start: 0;
			flex-shrink: 0;
		}
	}

	// ----- Legacy layout compat (centered / left-right) -----
	&--centered {
		--cta-bg: var(--nexus-primary);
		--cta-heading: #fff;
		--cta-text: rgba(255, 255, 255, 0.85);
		text-align: center;

		.nexus-cta-banner__actions { justify-content: center; }
		.nexus-cta-banner__desc { margin-inline: auto; }
	}

	&--left-right {
		--cta-bg: var(--nexus-primary);
		--cta-heading: #fff;
		--cta-text: rgba(255, 255, 255, 0.85);

		.nexus-cta-banner__inner {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 2rem;
			flex-wrap: wrap;
		}

		.nexus-cta-banner__actions {
			margin-block-start: 0;
			flex-shrink: 0;
		}
	}
}

// CTA Banner — dark mode: inverse theme system
html.nexus-dark {
	// Light-bg presets (1, 3) → dark in dark mode
	.nexus-cta-banner--centered-light,
	.nexus-cta-banner--side-by-side {
		--cta-bg: var(--nexus-surface);
		--cta-heading: var(--nexus-heading-color);
		--cta-text: var(--nexus-text-color);
		--cta-tagline: var(--nexus-color-secondary);

		.nexus-btn--outline {
			color: #fff;
			border-color: rgba(255, 255, 255, 0.7);

			&:hover, &:focus-visible {
				background: #fff;
				color: var(--nexus-color-primary);
				border-color: #fff;
			}
		}
	}

	// Dark-bg presets (2, 6) → light in dark mode
	.nexus-cta-banner--centered-dark,
	.nexus-cta-banner--split-accent {
		--cta-bg: var(--nexus-color-light);
		--cta-heading: var(--nexus-color-primary);
		--cta-text: var(--nexus-text-secondary);
		--cta-note: var(--nexus-text-muted);
	}

	// Gradient (4) → softer gradient in dark mode
	.nexus-cta-banner--gradient {
		background: linear-gradient(135deg, var(--nexus-color-accent), var(--nexus-color-dark));
		--cta-heading: var(--nexus-heading-color);
		--cta-text: rgba(255, 255, 255, 0.8);
		--cta-tagline: rgba(255, 255, 255, 0.6);
	}

	// Image overlay (5) → lighter overlay in dark mode
	.nexus-cta-banner--image-overlay {
		&::before {
			background-color: rgba(15, 23, 42, 0.7);
		}
	}
}

// -------------------------------------------------------------------------
// Row with Image
// -------------------------------------------------------------------------
.nexus-rwi {
	padding: 5rem 2rem;
	position: relative;

	&__row {
		display: flex;
		align-items: center;
		gap: 3rem;
		max-width: var(--nexus-container-max-width);
		margin-inline: auto;
		flex-wrap: wrap;
	}

	&__img-col,
	&__text-col {
		flex: 1;
		min-width: 280px;
	}

	&__img-col img {
		width: 100%;
		height: auto;
		display: block;
		border-radius: var(--nexus-border-radius-lg);
		object-fit: cover;
	}

	&__tagline {
		font-size: 0.875rem;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.08em;
		margin-block-end: 0.5rem;
		color: var(--nexus-secondary);
	}

	&__headline {
		font-size: clamp(1.5rem, 3vw, 2.25rem);
		font-weight: 700;
		line-height: 1.25;
		margin-block-end: 0.75rem;
	}

	&__desc {
		font-size: 1rem;
		line-height: 1.7;
		margin-block-end: 1rem;
	}

	&__list {
		list-style: none;
		padding: 0;
		margin: 0 0 1.5rem;
		display: flex;
		flex-direction: column;
		gap: 0.5rem;
	}

	&__stats {
		display: flex;
		gap: 2rem;
		flex-wrap: wrap;
		margin-block-end: 1.5rem;
	}

	&__actions {
		display: flex;
		gap: 1rem;
		flex-wrap: wrap;
	}

	// Style 3: Dark background
	&--image-left-dark {
		background-color: var(--nexus-color-primary);
	}

	// Style 4: Light background
	&--image-right-stats {
		background-color: var(--nexus-color-light);
	}

	// Style 5: Card with shadow (dark bg)
	&--card-shadow {
		background-color: var(--nexus-color-primary);
		box-shadow: var(--nexus-shadow-lg);
		border-radius: var(--nexus-border-radius-lg);

		.nexus-rwi__headline { color: #fff; }
		.nexus-rwi__tagline { color: var(--nexus-color-secondary); }
		.nexus-rwi__desc,
		.nexus-rwi__list li { color: #cbd5e1; }
	}

	// Style 6: Accent border on text col
	&--accent-border .nexus-rwi__text-col {
		border-inline-start: 4px solid var(--nexus-secondary);
		padding-inline-start: 2rem;
	}

	// Mobile: stack columns
	@media (max-width: 768px) {
		&__row { flex-direction: column !important; }
		&__img-col,
		&__text-col { min-width: 100%; }
	}
}

// Row with Image — dark mode overrides (uses CSS custom properties)
html.nexus-dark {
	.nexus-rwi--image-left-light,
	.nexus-rwi--image-right-light,
	.nexus-rwi--accent-border {
		--nexus-rwi-heading: #fff;
		--nexus-rwi-tagline: var(--nexus-color-secondary);
		--nexus-rwi-text: var(--nexus-text-color);

		.nexus-rwi__list li { color: var(--nexus-text-color) !important; }
	}

	.nexus-rwi--image-right-stats {
		--nexus-rwi-heading: var(--nexus-color-primary);
		--nexus-rwi-text: #495057;
		background-color: var(--nexus-bg-subtle);
	}
}

// -------------------------------------------------------------------------
// Blog Cards
// -------------------------------------------------------------------------
.nexus-bc {

	// Card hover effects
	&__card {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// Style 2: Minimal bordered
	&--minimal-bordered &__card {
		&:hover {
			border-color: var(--nexus-color-secondary);
		}
	}

	// Style 3: Dark elegant
	&--dark-elegant &__card {
		&:hover {
			box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
			border-color: rgba(255, 255, 255, 0.15);
		}
	}

	// Style 4: Overlay gradient
	&--overlay-gradient &__card--overlay {
		&:hover {
			transform: translateY(-6px);
			box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
		}
	}

	// Mobile: reduce section padding
	@media (max-width: 768px) {
		padding: 3rem 1rem !important;
	}

	// Prevent text overflow in all cards
	&__card {
		min-width: 0;
		overflow: hidden;
	}

	&__card-title {
		overflow-wrap: break-word;
		word-break: break-word;

		a {
			transition: color 0.25s ease;

			&:hover { color: var(--nexus-color-secondary) !important; }
		}
	}

	// Button hover overrides (inline styles need !important to override)
	.nexus-btn--primary:hover {
		background-color: var(--nexus-color-secondary) !important;
		border-color: var(--nexus-color-secondary) !important;
	}

	.nexus-btn--secondary:hover {
		background-color: var(--nexus-color-secondary) !important;
		border-color: var(--nexus-color-secondary) !important;
	}

	.nexus-btn--outline:hover {
		background-color: var(--nexus-color-secondary) !important;
		color: #fff !important;
	}

	.nexus-btn--outline-white:hover {
		background-color: #fff !important;
		color: var(--nexus-color-secondary) !important;
		border-color: #fff !important;
	}

	// Style 4: Overlay — smaller min-height on mobile
	&__card--overlay {
		@media (max-width: 768px) {
			min-height: 260px !important;
		}
	}

	// Style 5: Side image — mobile stack
	&__card--side {
		@media (max-width: 768px) {
			flex-direction: column !important;
			gap: 0 !important;

			.nexus-bc__card-side-thumb {
				flex: auto !important;
				max-width: 100% !important;
				width: 100%;
			}

			.nexus-bc__card-side-thumb img {
				width: 100% !important;
				height: 200px !important;
			}

			.nexus-bc__card-body {
				padding: 1.25rem !important;
			}
		}
	}

	// Style 6: Magazine featured — mobile stack
	&__card--mag-featured {
		@media (max-width: 768px) {
			flex-direction: column !important;
			gap: 0 !important;

			.nexus-bc__card-mag-thumb {
				flex: auto !important;
				width: 100%;
			}

			.nexus-bc__card-mag-thumb img {
				height: 220px !important;
			}

			.nexus-bc__card-body {
				padding: 1.25rem !important;
			}
		}
	}

	// Mobile: grid to single column
	&__grid {
		@media (max-width: 768px) {
			grid-template-columns: 1fr !important;
		}

		@media (min-width: 769px) and (max-width: 1024px) {
			grid-template-columns: repeat(2, 1fr) !important;
		}
	}

	// Card footer: wrap on small screens
	&__card-footer {
		@media (max-width: 480px) {
			flex-direction: column !important;
			align-items: flex-start !important;
			gap: 0.5rem;
		}
	}
}

// Blog Cards — dark mode overrides
html.nexus-dark {
	.nexus-bc--classic-light,
	.nexus-bc--minimal-bordered,
	.nexus-bc--side-image,
	.nexus-bc--magazine-featured {
		background-color: var(--nexus-bg) !important;

		.nexus-bc__headline { color: var(--nexus-heading-color) !important; }
		.nexus-bc__desc { color: var(--nexus-text-color) !important; }
		.nexus-bc__card-title a { color: var(--nexus-heading-color) !important; }
		.nexus-bc__card-excerpt { color: var(--nexus-text-color) !important; }

		.nexus-bc__card {
			background-color: var(--nexus-surface) !important;
			border-color: var(--nexus-border-color) !important;
		}
	}

	.nexus-bc--minimal-bordered .nexus-bc__card {
		border-color: var(--nexus-border-color) !important;
	}

	.nexus-bc--minimal-bordered .nexus-btn--outline-dark {
		color: var(--nexus-color-secondary) !important;
		border-color: var(--nexus-color-secondary) !important;
	}
}

// -------------------------------------------------------------------------
// Image Cards Grid
// -------------------------------------------------------------------------
.nexus-icg {

	// Mobile: reduce section padding
	@media (max-width: 768px) {
		padding: 3rem 1rem !important;
	}

	// Card hover lift
	&__card {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// Prevent text overflow
	&__card {
		min-width: 0;
	}

	&__card-title {
		overflow-wrap: break-word;
		word-break: break-word;
	}

	// Overlay cards: show overlay + content on hover
	&__card--overlay {
		cursor: pointer;

		&:hover .nexus-icg__card-overlay {
			opacity: 1 !important;
		}

		&:hover .nexus-icg__card-content {
			opacity: 1 !important;
			transform: translateY(0) !important;
		}

		// Touch/mobile: always show overlay + content
		@media (max-width: 768px) {
			.nexus-icg__card-overlay {
				opacity: 0.7 !important;
			}

			.nexus-icg__card-content {
				opacity: 1 !important;
				transform: translateY(0) !important;
			}
		}

		// Normalize masonry aspect ratios on mobile
		@media (max-width: 768px) {
			aspect-ratio: 4/3 !important;
		}
	}

	// Hover-zoom: image scales more
	&__card--zoom {
		&:hover img {
			transform: scale(1.12);
		}
	}

	// Rounded shadow: bigger shadow on hover
	&--rounded-shadow &__card {
		&:hover {
			box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
		}
	}

	// Caption-below: image hover zoom
	&__card--caption {
		.nexus-icg__card-thumb:hover img {
			transform: scale(1.08);
		}
	}

	// Mobile grid
	&__grid {
		@media (max-width: 768px) {
			grid-template-columns: 1fr !important;
			gap: 1.5rem !important;
		}

		@media (min-width: 769px) and (max-width: 1024px) {
			grid-template-columns: repeat(2, 1fr) !important;
		}
	}

	// Caption-below: smaller circle on mobile
	&__card--caption .nexus-icg__card-thumb {
		@media (max-width: 480px) {
			width: 140px !important;
			height: 140px !important;
		}
	}

	// Standard/rounded card body: tighter padding on mobile
	&__card-body {
		@media (max-width: 480px) {
			padding: 1rem 1.25rem 1.25rem !important;
		}
	}
}

// Image Cards Grid — dark mode overrides
html.nexus-dark {
	.nexus-icg--clean-grid,
	.nexus-icg--rounded-shadow,
	.nexus-icg--caption-below,
	.nexus-icg--hover-zoom {
		background-color: var(--nexus-bg) !important;

		.nexus-icg__headline { color: var(--nexus-heading-color); }
		.nexus-icg__desc { color: var(--nexus-text-color); }
		.nexus-icg__card-title { color: var(--nexus-heading-color); }
		.nexus-icg__card-title a { color: var(--nexus-heading-color) !important; }
		.nexus-icg__card-subtitle { color: var(--nexus-text-color); }

		.nexus-icg__card {
			background-color: var(--nexus-surface) !important;
		}
	}
}

// -------------------------------------------------------------------------
// Video Popup
// -------------------------------------------------------------------------
.nexus-video-popup {
	position: relative;
	overflow: hidden;
	background-size: cover;
	background-position: center;
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: var(--nexus-border-radius-lg);

	&__overlay {
		position: absolute;
		inset: 0;
	}

	&__play {
		position: relative;
		z-index: 2;
		border: none;
		cursor: pointer;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		transition: transform var(--nexus-transition-base), box-shadow var(--nexus-transition-base);

		&:hover {
			transform: scale(1.1);
			box-shadow: 0 0 0 12px rgba(255 255 255 / 20%);
		}
	}

	&__play-icon {
		font-size: 1.5rem;
		margin-inline-start: 0.2em; /* optical center for play triangle */
	}

	// Pulse variant
	&__pulse {
		position: absolute;
		inset: -8px;
		border-radius: 50%;
		border: 2px solid currentColor;
		animation: nexus-pulse 2s infinite;
		opacity: 0.4;
	}

	&__caption {
		position: absolute;
		bottom: 1.5rem;
		inset-inline: 0;
		text-align: center;
		z-index: 2;
		font-size: 0.9375rem;
		font-weight: 600;
	}
}

@keyframes nexus-pulse {
	0% { transform: scale(1); opacity: 0.4; }
	50% { transform: scale(1.15); opacity: 0.15; }
	100% { transform: scale(1); opacity: 0.4; }
}

// Video Modal
.nexus-video-modal {
	position: fixed;
	inset: 0;
	z-index: calc(var(--nexus-z-modal) + 10);
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 1rem;

	&:not(.is-open) { pointer-events: none; }

	&__backdrop {
		position: absolute;
		inset: 0;
		background-color: rgba(0 0 0 / 0.92);
		opacity: 0;
		transition: opacity 0.3s ease;
	}

	&.is-open &__backdrop { opacity: 1; }

	&__inner {
		position: relative;
		z-index: 1;
		width: 100%;
		max-width: 900px;
		opacity: 0;
		transform: scale(0.95);
		transition: opacity 0.3s ease, transform 0.3s ease;
	}

	&.is-open &__inner {
		opacity: 1;
		transform: scale(1);
	}

	&__close {
		position: absolute;
		top: -2.5rem;
		inset-inline-end: 0;
		background: none;
		border: none;
		color: #fff;
		font-size: 2rem;
		cursor: pointer;
		line-height: 1;
	}

	&__embed {
		position: relative;
		padding-block-end: 56.25%;
		height: 0;
		overflow: hidden;
		border-radius: var(--nexus-border-radius);
		background-color: #000;

		iframe,
		video {
			position: absolute;
			inset: 0;
			width: 100%;
			height: 100%;
		}
	}
}

// -------------------------------------------------------------------------
// Product Carousel
// -------------------------------------------------------------------------
.nexus-product-carousel {
	overflow: hidden;
	position: relative;
}

.nexus-product-card {
	background-color: var(--nexus-bg);
	border: 1px solid var(--nexus-border-color);
	border-radius: var(--nexus-border-radius-lg);
	overflow: hidden;
	transition: transform var(--nexus-transition-base), box-shadow var(--nexus-transition-base);

	&:hover {
		transform: translateY(-4px);
		box-shadow: var(--nexus-shadow-md);
	}

	&__thumb {
		position: relative;
		overflow: hidden;
		aspect-ratio: 1;

		img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			transition: transform var(--nexus-transition-base);
		}

		&:hover img { transform: scale(1.05); }
	}

	&__badge {
		position: absolute;
		top: 0.75rem;
		inset-inline-start: 0.75rem;
		font-size: 0.6875rem;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.06em;
		padding: 0.2rem 0.5rem;
		border-radius: var(--nexus-border-radius-sm);
		color: #fff;
		z-index: 2;

		&--sale { background-color: var(--nexus-danger, #ef4444); }
		&--featured { background-color: var(--nexus-warning, #f97316); }
	}

	&__actions {
		position: absolute;
		bottom: 0.75rem;
		inset-inline: 0;
		display: flex;
		justify-content: center;
		gap: 0.5rem;
		transform: translateY(100%);
		transition: transform var(--nexus-transition-base);
	}

	&__thumb:hover &__actions {
		transform: translateY(0);
	}

	&__body {
		padding: 1rem;
	}

	&__title {
		font-size: 0.9375rem;
		margin-block-end: 0.5rem;

		a {
			color: var(--nexus-heading-color);
			text-decoration: none;
			transition: color var(--nexus-transition-fast);

			&:hover { color: var(--nexus-primary); }
		}
	}

	&__rating {
		margin-block-end: 0.35rem;

		.star-rating { font-size: 0.8125rem; }
	}

	&__price {
		.price {
			font-weight: 700;
			color: var(--nexus-primary);

			del {
				font-weight: 400;
				color: var(--nexus-text-muted);
				margin-inline-end: 0.3rem;
			}
		}
	}
}

// -------------------------------------------------------------------------
// Testimonials Slider
// -------------------------------------------------------------------------
.nexus-ts {
	position: relative;

	// Card animation.
	&__card--anim {
		opacity: 0;
		transform: translateY(30px);
		transition: opacity 0.6s ease, transform 0.6s ease;

		&.is-visible {
			opacity: 1;
			transform: translateY(0);
		}
	}

	// Swiper nav arrows inside slider.
	.swiper-button-prev,
	.swiper-button-next {
		width: 44px;
		height: 44px;
		background: var(--nexus-color-white);
		border-radius: 50%;
		box-shadow: var(--nexus-shadow-md);

		&::after {
			font-size: 1rem;
			color: var(--nexus-body-color);
		}
	}

	// Dots spacing.
	&__dots {
		margin-top: 1.5rem;
		text-align: center;
	}

	// Bubble speech card — triangle pointer.
	&--bubble-speech .nexus-ts__card--bubble {
		&::after {
			content: '';
			position: absolute;
			bottom: -12px;
			left: 2rem;
			width: 0;
			height: 0;
			border-left: 12px solid transparent;
			border-right: 12px solid transparent;
			border-top: 12px solid #f0f4f8;
		}
	}

	// Bubble — author sits below card with spacing for the triangle.
	&--bubble-speech .nexus-ts__author {
		padding-top: 1.25rem;
	}

	// Large quote — oversized quote mark.
	&--large-quote .nexus-ts__quote {
		font-size: 5rem !important;
		margin-bottom: 1rem !important;
	}

	// Accented cards — glow on hover.
	&--cards-accented .nexus-ts__card--accented {
		transition: box-shadow 0.3s ease, transform 0.3s ease;

		&:hover {
			box-shadow: 0 0 20px rgba(233, 69, 96, 0.15);
			transform: translateY(-2px);
		}
	}

	// General card hover for shadow style.
	&--classic-light .nexus-ts__card--shadow,
	&--dark-elegant .nexus-ts__card--shadow {
		transition: box-shadow 0.3s ease, transform 0.3s ease;

		&:hover {
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
			transform: translateY(-2px);
		}
	}

	// Bordered card hover.
	&--minimal-clean .nexus-ts__card--bordered {
		transition: border-color 0.3s ease, box-shadow 0.3s ease;

		&:hover {
			border-color: var(--nexus-color-secondary);
			box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
		}
	}

	// Mobile.
	@include respond-below(md) {
		padding: 3rem 0 !important;

		&__header {
			margin-bottom: 2rem !important;
		}
	}

	@include respond-below(sm) {
		&__card--large {
			padding: 2rem 1rem !important;
		}
	}
}

// Dark mode overrides for testimonials slider light-bg presets.
.nexus-dark {
	.nexus-ts--classic-light,
	.nexus-ts--minimal-clean,
	.nexus-ts--bubble-speech,
	.nexus-ts--large-quote {
		background-color: var(--nexus-bg) !important;

		.nexus-ts__card {
			background: var(--nexus-bg-subtle) !important;
		}
	}

	.nexus-ts--bubble-speech .nexus-ts__card--bubble::after {
		border-top-color: var(--nexus-bg-subtle);
	}
}

// -------------------------------------------------------------------------
// Feature List
// -------------------------------------------------------------------------
.nexus-fl {

	// ---- Entrance animations ----
	&__item--anim {
		opacity: 0;
		transform: translateY(20px);
		transition: opacity 0.5s ease, transform 0.5s ease;

		&.is-visible {
			opacity: 1;
			transform: none;
		}
	}

	// ---- Check-list divider hover ----
	&--check-list .nexus-fl__item {
		transition: background-color 0.25s ease;

		&:hover {
			background-color: rgba(0, 0, 0, 0.015);
		}
	}

	&--check-list .nexus-fl__icon svg {
		transition: transform 0.25s ease;
	}

	&--check-list .nexus-fl__item:hover .nexus-fl__icon svg {
		transform: scale(1.15);
	}

	// ---- Icon bordered hover ----
	&--icon-bordered .nexus-fl__item {
		transition: box-shadow 0.3s ease, transform 0.3s ease, border-color 0.3s ease;

		&:hover {
			box-shadow: 0 6px 24px rgba(0, 0, 0, 0.08);
			transform: translateY(-2px);
			border-color: var(--nexus-color-secondary) !important;
		}
	}

	// ---- Dark numbered ----
	&--dark-numbered .nexus-fl__item {
		transition: background-color 0.25s ease;

		&:hover {
			background-color: rgba(255, 255, 255, 0.03);
		}
	}

	// ---- Timeline ----
	&--timeline .nexus-fl__timeline-line {
		transition: background-color 0.3s ease;
	}

	&--timeline .nexus-fl__timeline-dot .nexus-fl__icon {
		transition: transform 0.3s ease, box-shadow 0.3s ease;
		box-shadow: 0 0 0 4px #fff;
	}

	&--timeline .nexus-fl__item:hover .nexus-fl__timeline-dot .nexus-fl__icon {
		transform: scale(1.15);
		box-shadow: 0 0 0 4px #fff, 0 0 12px rgba(233, 69, 96, 0.3);
	}

	// ---- Card grid hover ----
	&--card-grid .nexus-fl__item {
		transition: box-shadow 0.3s ease, transform 0.3s ease;

		&:hover {
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
			transform: translateY(-4px);
		}
	}

	&--card-grid .nexus-fl__icon {
		transition: transform 0.3s ease;
	}

	&--card-grid .nexus-fl__item:hover .nexus-fl__icon {
		transform: scale(1.1);
	}

	// ---- Minimal accent ----
	&--minimal-accent .nexus-fl__item {
		transition: border-color 0.3s ease, background-color 0.3s ease, transform 0.3s ease;

		&:hover {
			background-color: rgba(255, 255, 255, 0.06) !important;
			border-left-color: var(--nexus-color-secondary) !important;
			transform: translateX(4px);
		}
	}

	// ---- Responsive ----
	@include respond-below(md) {
		padding: 3rem 0 !important;

		&__header {
			margin-bottom: 2rem !important;
		}

		&__grid {
			grid-template-columns: repeat(2, 1fr) !important;
		}

		&__list {
			grid-template-columns: 1fr !important;
			gap: 0 !important;
		}

		// Icon-bordered cards: stack single column, full-width items.
		&--icon-bordered .nexus-fl__item {
			padding: 1rem !important;
			border-radius: 0 !important;
			border-left: none !important;
			border-right: none !important;
		}

		// Card grid: 2 cols on tablet.
		&--card-grid .nexus-fl__grid {
			grid-template-columns: repeat(2, 1fr) !important;
		}
	}

	@include respond-below(sm) {
		&__grid {
			grid-template-columns: 1fr !important;
		}

		// Icon-bordered: full-width list items.
		&--icon-bordered .nexus-fl__list {
			margin-left: -1rem !important;
			margin-right: -1rem !important;
			max-width: none !important;
		}

		&--icon-bordered .nexus-fl__item {
			gap: 0.75rem !important;
			padding: 0.875rem 1rem !important;
			border-radius: 0 !important;
			border-left: none !important;
			border-right: none !important;
		}

		&--icon-bordered .nexus-fl__icon {
			width: 36px !important;
			height: 36px !important;
		}

		// Card grid: full-width single column items.
		&--card-grid .nexus-fl__grid {
			grid-template-columns: 1fr !important;
			gap: 1rem !important;
			margin-left: -1rem !important;
			margin-right: -1rem !important;
		}

		&--card-grid .nexus-fl__item {
			border-radius: 0 !important;
		}

		&__timeline {
			padding-left: 30px !important;

			.nexus-fl__timeline-dot {
				left: -16px !important;

				.nexus-fl__icon {
					width: 32px !important;
					height: 32px !important;
				}
			}
		}
	}
}

// Dark mode overrides for feature list light-bg presets.
.nexus-dark {
	.nexus-fl--check-list,
	.nexus-fl--icon-bordered,
	.nexus-fl--timeline,
	.nexus-fl--card-grid {
		background-color: var(--nexus-bg) !important;

		.nexus-fl__item-title {
			color: var(--nexus-text-heading) !important;
		}

		.nexus-fl__item-text {
			color: var(--nexus-text) !important;
		}

		.nexus-fl__title {
			color: var(--nexus-text-heading) !important;
		}

		.nexus-fl__desc {
			color: var(--nexus-text) !important;
		}
	}

	.nexus-fl--icon-bordered .nexus-fl__item,
	.nexus-fl--card-grid .nexus-fl__item {
		background: var(--nexus-bg-subtle) !important;
	}

	.nexus-fl--timeline .nexus-fl__timeline-dot .nexus-fl__icon {
		box-shadow: 0 0 0 4px var(--nexus-bg);
	}
}

// -------------------------------------------------------------------------
// Image Cards Scroller
// -------------------------------------------------------------------------
.nexus-ics {

	// ---- Standard card hover ----
	&__card--standard {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12) !important;
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// ---- Overlay card hover ----
	&__card--overlay {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2) !important;
		}

		&:hover img {
			transform: scale(1.08);
		}
	}

	// Gradient-hover: overlay + content revealed on hover.
	&--gradient-hover .nexus-ics__card--overlay {
		&:hover .nexus-ics__card-overlay {
			opacity: 1 !important;
		}

		&:hover .nexus-ics__card-content {
			opacity: 1 !important;
		}
	}

	// ---- Caption card hover ----
	&__card--caption {
		&:hover {
			transform: translateY(-2px);
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// ---- Swiper arrows ----
	&__arrow {
		width: 48px !important;
		height: 48px !important;
		border-radius: 50% !important;
		background: rgba(255, 255, 255, 0.85) !important;
		backdrop-filter: blur(8px);
		border: 1px solid rgba(0, 0, 0, 0.08) !important;
		box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
		transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
		z-index: 10;
		top: 50%;
		margin-top: 0;
		transform: translateY(-50%);

		&::after {
			font-size: 14px !important;
			font-weight: 700;
			color: var(--nexus-color-primary);
		}

		&:hover {
			background: var(--nexus-color-secondary) !important;
			border-color: var(--nexus-color-secondary) !important;
			box-shadow: 0 6px 24px rgba(var(--nexus-secondary-rgb), 0.3);
			transform: translateY(-50%) scale(1.08);

			&::after {
				color: #fff;
			}
		}

		&--prev {
			left: 1rem;
		}

		&--next {
			right: 1rem;
		}
	}

	// Dark presets: glassmorphism arrows.
	&--dark-cinema &__arrow,
	&--fullwidth-hero &__arrow {
		background: rgba(255, 255, 255, 0.12) !important;
		border-color: rgba(255, 255, 255, 0.2) !important;
		box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);

		&::after {
			color: #fff;
		}

		&:hover {
			background: rgba(255, 255, 255, 0.25) !important;
			border-color: rgba(255, 255, 255, 0.4) !important;
			box-shadow: 0 6px 24px rgba(0, 0, 0, 0.3);
		}
	}

	// ---- Pagination dots ----
	&__dots {
		margin-top: 1.5rem !important;
		position: relative !important;
		bottom: auto !important;

		.swiper-pagination-bullet {
			width: 10px;
			height: 10px;
			opacity: 0.3;
			transition: opacity 0.3s ease, transform 0.3s ease;
		}

		.swiper-pagination-bullet-active {
			opacity: 1;
			transform: scale(1.2);
		}
	}

	&--minimal-slide &__dots .swiper-pagination-bullet-active,
	&--gradient-hover &__dots .swiper-pagination-bullet-active {
		background: var(--nexus-color-secondary);
	}

	&--dark-cinema &__dots .swiper-pagination-bullet-active {
		background: var(--nexus-color-secondary);
	}

	&--rounded-peek &__dots .swiper-pagination-bullet-active,
	&--caption-card &__dots .swiper-pagination-bullet-active {
		background: var(--nexus-color-accent);
	}

	&--fullwidth-hero &__dots .swiper-pagination-bullet {
		background: #fff;
	}

	&--fullwidth-hero &__dots .swiper-pagination-bullet-active {
		background: #fff;
	}

	// ---- Responsive ----
	@include respond-below(md) {
		padding: 3rem 0 !important;

		&__header {
			margin-bottom: 1.5rem !important;
		}

		&__arrow {
			display: none !important;
		}
	}

	@include respond-below(sm) {
		&__card--standard {
			border-radius: 8px !important;
		}

		&__card--overlay {
			border-radius: 8px !important;
		}

		&__dots {
			margin-top: 1rem !important;
		}
	}
}

// Dark mode overrides for image cards scroller light-bg presets.
.nexus-dark {
	.nexus-ics--minimal-slide,
	.nexus-ics--rounded-peek,
	.nexus-ics--caption-card,
	.nexus-ics--gradient-hover {
		background-color: var(--nexus-bg) !important;

		.nexus-ics__card--standard,
		.nexus-ics__card--caption {
			background: var(--nexus-bg-subtle) !important;
		}

		.nexus-ics__card-title {
			color: var(--nexus-text-heading) !important;
		}

		.nexus-ics__title {
			color: var(--nexus-text-heading) !important;
		}

		.nexus-ics__desc {
			color: var(--nexus-text) !important;
		}
	}
}

// -------------------------------------------------------------------------
// Team Grid
// -------------------------------------------------------------------------
.nexus-tg {

	// ---- Entrance animation ----
	&__card--anim {
		opacity: 0;
		transform: translateY(20px);
		transition: opacity 0.5s ease, transform 0.5s ease;

		&.is-visible {
			opacity: 1;
			transform: none;
		}
	}

	// ---- Clean cards (style 1): overlay on photo hover ----
	&--clean-cards .nexus-tg__card {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12) !important;
		}

		&:hover img {
			transform: scale(1.05);
		}

		&:hover .nexus-tg__overlay {
			opacity: 1 !important;
		}
	}

	// ---- Rounded photo (style 2): card lift ----
	&--rounded-photo .nexus-tg__card {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
		}
	}

	// ---- Dark overlay (style 3): reveal on hover ----
	&--dark-overlay .nexus-tg__card {
		&:hover img {
			transform: scale(1.08);
		}

		&:hover .nexus-tg__overlay {
			opacity: 1 !important;
		}
	}

	// ---- Minimal row (style 4): hover bg ----
	&--minimal-row .nexus-tg__card {
		&:hover {
			background-color: rgba(0, 0, 0, 0.02) !important;
		}
	}

	// ---- Bordered hover (style 5): lift + accent border ----
	&--bordered-hover .nexus-tg__card {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1) !important;
			border-color: var(--nexus-color-secondary) !important;
		}
	}

	// ---- Accent bottom (style 6): lift + image zoom ----
	&--accent-bottom .nexus-tg__card {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2) !important;
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// ---- Social link hover ----
	&__social-link:hover {
		color: var(--nexus-color-secondary) !important;
		background: rgba(var(--nexus-secondary-rgb), 0.08);
	}

	// ---- Button hover ----
	&__btn:hover {
		opacity: 0.9;
		transform: translateY(-2px);
	}

	// ---- Responsive ----
	@include respond-below(md) {
		padding: 3rem 0 !important;

		&__header {
			margin-bottom: 2rem !important;
		}

		&__grid {
			grid-template-columns: repeat(2, 1fr) !important;
		}

		// Horizontal stays 1 col on tablet.
		&--minimal-row .nexus-tg__grid {
			grid-template-columns: 1fr !important;
		}
	}

	@include respond-below(sm) {
		&__grid {
			grid-template-columns: 1fr !important;
		}
	}
}

// Dark mode overrides for team grid light-bg presets.
.nexus-dark {
	.nexus-tg--clean-cards,
	.nexus-tg--rounded-photo,
	.nexus-tg--minimal-row,
	.nexus-tg--bordered-hover {
		background-color: var(--nexus-bg) !important;

		.nexus-tg__title {
			color: var(--nexus-text-heading) !important;
		}

		.nexus-tg__desc {
			color: var(--nexus-text) !important;
		}

		.nexus-tg__name {
			color: var(--nexus-text-heading) !important;
		}

		.nexus-tg__position {
			color: var(--nexus-text-muted) !important;
		}

		.nexus-tg__bio {
			color: var(--nexus-text) !important;
		}
	}

	.nexus-tg--clean-cards .nexus-tg__card,
	.nexus-tg--rounded-photo .nexus-tg__card,
	.nexus-tg--bordered-hover .nexus-tg__card {
		background: var(--nexus-bg-subtle) !important;
	}

	.nexus-tg--bordered-hover .nexus-tg__card {
		border-color: var(--nexus-border-color) !important;
	}
}

// -------------------------------------------------------------------------
// Content Carousel (.nexus-cc)
// -------------------------------------------------------------------------
.nexus-cc {

	// ---- Standard card hover (clean-cards) ----
	&__card--standard {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12) !important;
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// ---- Overlay card hover (cinema-overlay) ----
	&__card--overlay {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2) !important;
		}

		&:hover img {
			transform: scale(1.08);
		}
	}

	// ---- Pill card hover (soft-rounded) ----
	&__card--pill {
		&:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 32px rgba(15, 52, 96, 0.12) !important;
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// ---- Split card hover (fullwidth-focus) ----
	&__card--split {
		&:hover {
			box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// ---- Caption card hover (bordered-minimal) ----
	&__card--caption {
		&:hover {
			transform: translateY(-2px);
		}

		&:hover .nexus-cc__card-thumb {
			border-top-color: var(--nexus-color-secondary) !important;
		}

		&:hover img {
			transform: scale(1.05);
		}
	}

	// ---- Neon card hover (neon-dark) ----
	&__card--neon {
		&:hover {
			border-color: rgba(var(--nexus-secondary-rgb), 0.5) !important;
			box-shadow: 0 0 24px rgba(var(--nexus-secondary-rgb), 0.25),
			             0 0 48px rgba(var(--nexus-secondary-rgb), 0.1);
			transform: translateY(-4px);
		}

		&:hover .nexus-cc__neon-overlay {
			opacity: 0.85 !important;
		}

		&:hover .nexus-cc__neon-content {
			opacity: 1 !important;
			transform: translateY(0) !important;
		}
	}

	// ---- Swiper arrows ----
	&__arrow {
		width: 48px !important;
		height: 48px !important;
		border-radius: 50% !important;
		background: rgba(255, 255, 255, 0.85) !important;
		backdrop-filter: blur(8px);
		border: 1px solid rgba(0, 0, 0, 0.08) !important;
		box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
		transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
		z-index: 10;
		top: 50%;
		margin-top: 0;
		transform: translateY(-50%);

		&::after {
			font-size: 14px !important;
			font-weight: 700;
			color: var(--nexus-color-primary);
		}

		&:hover {
			background: var(--nexus-color-secondary) !important;
			border-color: var(--nexus-color-secondary) !important;
			box-shadow: 0 6px 24px rgba(var(--nexus-secondary-rgb), 0.3);
			transform: translateY(-50%) scale(1.08);

			&::after {
				color: #fff;
			}
		}

		&--prev {
			left: 1rem;
		}

		&--next {
			right: 1rem;
		}
	}

	// Dark presets: glassmorphism arrows.
	&--cinema-overlay &__arrow,
	&--neon-dark &__arrow,
	&--fullwidth-focus &__arrow {
		background: rgba(255, 255, 255, 0.12) !important;
		border-color: rgba(255, 255, 255, 0.2) !important;
		box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);

		&::after {
			color: #fff;
		}

		&:hover {
			background: rgba(255, 255, 255, 0.25) !important;
			border-color: rgba(255, 255, 255, 0.4) !important;
			box-shadow: 0 6px 24px rgba(0, 0, 0, 0.3);
		}
	}

	// ---- Pagination dots ----
	&__dots {
		margin-top: 1.5rem !important;
		position: relative !important;
		bottom: auto !important;

		.swiper-pagination-bullet {
			width: 10px;
			height: 10px;
			opacity: 0.3;
			transition: opacity 0.3s ease, transform 0.3s ease;
		}

		.swiper-pagination-bullet-active {
			opacity: 1;
			transform: scale(1.2);
		}
	}

	&--clean-cards &__dots .swiper-pagination-bullet-active,
	&--bordered-minimal &__dots .swiper-pagination-bullet-active {
		background: var(--nexus-color-secondary);
	}

	&--cinema-overlay &__dots .swiper-pagination-bullet-active {
		background: var(--nexus-color-secondary);
	}

	&--soft-rounded &__dots .swiper-pagination-bullet-active {
		background: var(--nexus-color-accent);
	}

	&--fullwidth-focus &__dots .swiper-pagination-bullet {
		background: #fff;
	}

	&--fullwidth-focus &__dots .swiper-pagination-bullet-active {
		background: #fff;
	}

	&--neon-dark &__dots .swiper-pagination-bullet-active {
		background: var(--nexus-color-secondary);
		box-shadow: 0 0 8px rgba(var(--nexus-secondary-rgb), 0.5);
	}

	// ---- Split layout mobile ----
	&__card--split {
		@include respond-below(md) {
			flex-direction: column !important;

			.nexus-cc__card-img-col {
				flex: 0 0 auto !important;
				min-height: 220px !important;
			}

			.nexus-cc__card-text-col {
				padding: 2rem 1.5rem !important;
			}
		}
	}

	// ---- Responsive ----
	@include respond-below(md) {
		padding: 3rem 0 !important;

		&__header {
			margin-bottom: 1.5rem !important;
		}

		&__arrow {
			display: none !important;
		}
	}

	@include respond-below(sm) {
		&__card--standard,
		&__card--pill {
			border-radius: 8px !important;
		}

		&__dots {
			margin-top: 1rem !important;
		}
	}
}

// Dark mode overrides for content carousel light-bg presets.
.nexus-dark {
	.nexus-cc--clean-cards,
	.nexus-cc--soft-rounded,
	.nexus-cc--bordered-minimal {
		background-color: var(--nexus-bg) !important;

		.nexus-cc__card--standard,
		.nexus-cc__card--pill {
			background: var(--nexus-bg-subtle) !important;
		}

		.nexus-cc__card-title {
			color: var(--nexus-heading-color) !important;
		}

		.nexus-cc__title {
			color: var(--nexus-heading-color) !important;
		}

		.nexus-cc__desc {
			color: var(--nexus-text-color) !important;
		}

		.nexus-cc__card-desc {
			color: var(--nexus-text-secondary) !important;
		}

		.nexus-cc__card--caption .nexus-cc__card-thumb {
			border-top-color: transparent;
		}
	}
}
