// =============================================================================
// Elementor Widgets - Nexus Custom Styles
// =============================================================================
@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

// -------------------------------------------------------------------------
// Icon Box
// -------------------------------------------------------------------------
.nexus-icon-box {
	&.layout-inline {
		display: flex;
		align-items: flex-start;
		gap: 1.25rem;

		.nexus-icon-box__icon-wrap { flex-shrink: 0; }
	}

	&__icon-wrap {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		border-radius: var(--nexus-border-radius);
	}

	&__body {}

	&__title {
		margin-block: 0.75rem 0.5rem;

		.layout-inline & {
			margin-block-start: 0;
		}
	}

	&__desc {
		line-height: 1.7;
		color: var(--nexus-text-secondary);
	}

	&__link {
		display: inline-flex;
		align-items: center;
		gap: 0.3rem;
		margin-block-start: 0.75rem;
		font-weight: 600;
		color: var(--nexus-primary);
		text-decoration: none;
		transition: gap var(--nexus-transition-fast);

		&:hover { gap: 0.55rem; }
	}
}

// -------------------------------------------------------------------------
// Hero Slider
// -------------------------------------------------------------------------
.nexus-hero-slider {
	.nexus-hero-slide {
		position: relative;
		overflow: hidden;

		&__bg {
			position: absolute;
			inset: 0;
			background-size: cover;
			background-position: center;
		}

		&__overlay {
			position: absolute;
			inset: 0;
		}

		&__content {
			position: relative;
			z-index: 2;
			display: flex;
			flex-direction: column;
			justify-content: center;
			padding: 4rem 2rem;
		}

		&__tagline {
			display: inline-block;
			font-size: 0.875rem;
			font-weight: 600;
			text-transform: uppercase;
			letter-spacing: 0.1em;
			margin-block-end: 0.75rem;
		}

		&__title {
			line-height: 1.15;
			margin-block-end: 1rem;
		}

		&__text {
			line-height: 1.75;
			margin-block-end: 1.5rem;
			max-width: 600px;
		}

		&__btns {
			display: flex;
			gap: 1rem;
			flex-wrap: wrap;
		}
	}

	// Content alignment variants
	&.content-center .nexus-hero-slide__content {
		align-items: center;
		text-align: center;

		.nexus-hero-slide__text { margin-inline: auto; }
	}

	&.content-right .nexus-hero-slide__content {
		align-items: flex-end;
		text-align: right;
	}
}

// -------------------------------------------------------------------------
// Portfolio Grid
// -------------------------------------------------------------------------
.nexus-portfolio-wrap {}

.nexus-portfolio-filter {
	display: flex;
	gap: 0.5rem;
	flex-wrap: wrap;
	margin-block-end: 2.5rem;

	&__btn {
		display: inline-block;
		padding: 0.4rem 1.1rem;
		border: 1px solid var(--nexus-border-color);
		border-radius: 100px;
		background: transparent;
		cursor: pointer;
		font-size: 0.875rem;
		color: var(--nexus-text-color);
		transition: all var(--nexus-transition-fast);

		&:hover,
		&.is-active {
			background-color: var(--nexus-primary);
			border-color: var(--nexus-primary);
			color: #fff;
		}
	}
}

.nexus-portfolio-grid {
	display: grid;
	grid-template-columns: repeat(var(--nexus-portfolio-cols, 3), 1fr);
	gap: 1.5rem;

	@include respond-below(md) { grid-template-columns: repeat(2, 1fr); }
	@include respond-below(sm) { grid-template-columns: 1fr; }
}

.nexus-portfolio-item {
	position: relative;
	border-radius: var(--nexus-border-radius);
	overflow: hidden;

	&__img-wrap {
		position: relative;
		overflow: hidden;

		img {
			position: absolute;
			inset: 0;
			width: 100%;
			height: 100%;
			object-fit: cover;
			transition: transform var(--nexus-transition-base);
		}
	}

	&:hover &__img-wrap img {
		transform: scale(1.06);
	}

	&__overlay {
		position: absolute;
		inset: 0;
		display: flex;
		align-items: center;
		justify-content: center;
		opacity: 0;
		transition: opacity var(--nexus-transition-base);
		font-size: 1.75rem;
		color: #fff;
	}

	&:hover &__overlay {
		opacity: 1;
	}

	&__info {
		padding: 1rem;
		background-color: var(--nexus-bg);
	}

	&__cat {
		font-size: 0.75rem;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		color: var(--nexus-primary);
		display: block;
		margin-block-end: 0.25rem;
	}

	&__title {
		font-size: 1rem;
		margin: 0;
	}

	&__link { text-decoration: none; color: inherit; }
}

// -------------------------------------------------------------------------
// Testimonials
// -------------------------------------------------------------------------
.nexus-testimonials {
	&--slider { overflow: hidden; }

	&__dots {
		margin-block-start: 1.5rem;
		text-align: center;
	}
}

.nexus-testimonials-grid {
	display: grid;
	grid-template-columns: repeat(var(--nexus-testimonials-cols, 3), 1fr);
	gap: 1.5rem;

	@include respond-below(md) { grid-template-columns: repeat(2, 1fr); }
	@include respond-below(sm) { grid-template-columns: 1fr; }
}

.nexus-testimonial-card {
	background-color: var(--nexus-bg);
	border: 1px solid var(--nexus-border-color);
	border-radius: var(--nexus-border-radius-lg);
	padding: 2rem;
	position: relative;
	transition: box-shadow var(--nexus-transition-base);

	&:hover {
		box-shadow: var(--nexus-shadow-md);
	}

	&__quote {
		font-size: 3.5rem;
		line-height: 0.75;
		color: var(--nexus-primary);
		font-family: Georgia, serif;
		margin-block-end: 0.75rem;
		opacity: 0.4;
	}

	&__stars {
		display: flex;
		gap: 0.15rem;
		margin-block-end: 0.75rem;
	}

	&__star { color: #f5a623; font-size: 0.875rem;
		&.is-empty { color: var(--nexus-border-color); }
	}

	&__text {
		font-size: 0.9375rem;
		line-height: 1.75;
		color: var(--nexus-text-secondary);
		margin-block-end: 1.5rem;
		font-style: italic;
	}

	&__author {
		display: flex;
		align-items: center;
		gap: 0.875rem;
	}

	&__avatar {
		flex-shrink: 0;

		img {
			width: 48px;
			height: 48px;
			border-radius: 50%;
			object-fit: cover;
		}
	}

	&__name {
		display: block;
		font-weight: 700;
		font-size: 0.9375rem;
	}

	&__position {
		display: block;
		font-size: 0.8125rem;
		color: var(--nexus-text-muted);
	}
}

// -------------------------------------------------------------------------
// Team
// -------------------------------------------------------------------------
.nexus-team-grid {
	display: grid;
	grid-template-columns: repeat(var(--nexus-team-cols, 4), 1fr);
	gap: 1.875rem;

	@include respond-below(lg) { grid-template-columns: repeat(3, 1fr); }
	@include respond-below(md) { grid-template-columns: repeat(2, 1fr); }
	@include respond-below(sm) { grid-template-columns: 1fr; }
}

.nexus-team-member {
	&__img-wrap {
		position: relative;
		overflow: hidden;
		border-radius: var(--nexus-border-radius-lg);
		aspect-ratio: 3/4;

		img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			transition: transform var(--nexus-transition-base);
		}
	}

	&:hover &__img-wrap img {
		transform: scale(1.05);
	}

	&__overlay {
		position: absolute;
		inset: 0;
		background: rgba(0 0 0 / 0.55);
		display: flex;
		align-items: flex-end;
		justify-content: center;
		padding-block-end: 1.5rem;
		opacity: 0;
		transition: opacity var(--nexus-transition-base);
	}

	&:hover &__overlay { opacity: 1; }

	&__info {
		padding-block-start: 1rem;
	}

	&__name {
		font-size: 1.0625rem;
		margin-block-end: 0.2rem;
	}

	&__position {
		display: block;
		font-size: 0.875rem;
		color: var(--nexus-primary);
		font-weight: 500;
	}

	&__bio {
		font-size: 0.875rem;
		color: var(--nexus-text-secondary);
		line-height: 1.65;
		margin-block-start: 0.5rem;
	}

	&__social {
		display: flex;
		gap: 0.6rem;
		margin-block-start: 0.75rem;

		a {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			width: 2rem;
			height: 2rem;
			border-radius: 50%;
			background-color: rgba(255 255 255 / 15%);
			color: #fff;
			font-size: 0.875rem;
			transition: background-color var(--nexus-transition-fast);
			text-decoration: none;

			&:hover { background-color: var(--nexus-primary); }
		}
	}
}

// -------------------------------------------------------------------------
// Services Grid
// -------------------------------------------------------------------------
.nexus-services-grid {
	display: grid;
	grid-template-columns: repeat(var(--nexus-services-cols, 3), 1fr);
	gap: 1.875rem;

	@include respond-below(md) { grid-template-columns: repeat(2, 1fr); }
	@include respond-below(sm) { grid-template-columns: 1fr; }
}

.nexus-service-card {
	padding: 2rem;
	border-radius: var(--nexus-border-radius-lg);
	background-color: var(--nexus-bg);
	border: 1px solid var(--nexus-border-color);
	transition: transform var(--nexus-transition-base), box-shadow var(--nexus-transition-base), border-color var(--nexus-transition-base);
	text-decoration: none;
	color: inherit;
	display: block;

	// Hover effects
	&--hover-lift:hover {
		transform: translateY(-6px);
		box-shadow: var(--nexus-shadow-lg);
	}

	&--hover-glow:hover {
		box-shadow: 0 0 0 3px rgba(var(--nexus-primary-rgb), 0.2), var(--nexus-shadow-md);
	}

	&--hover-border:hover {
		border-color: var(--nexus-primary);
	}

	// Flat variant
	.nexus-services--flat & {
		border: none;
		background: none;
	}

	// Border left variant
	.nexus-services--border & {
		border: none;
		border-inline-start: 3px solid var(--nexus-primary);
		border-radius: 0 var(--nexus-border-radius-lg) var(--nexus-border-radius-lg) 0;
	}

	// Inline icon
	.nexus-services--icon-left & {
		display: flex;
		align-items: flex-start;
		gap: 1.25rem;
	}

	&__icon-wrap {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		border-radius: 50%;
		flex-shrink: 0;
		background-color: rgba(var(--nexus-primary-rgb), 0.1);
	}

	&__icon {
		color: var(--nexus-primary);
		display: flex;
		align-items: center;
		justify-content: center;
	}

	&__body {}

	&__title {
		font-size: 1.125rem;
		margin-block: 1rem 0.5rem;

		.nexus-services--icon-left & { margin-block-start: 0; }
	}

	&__desc {
		font-size: 0.9375rem;
		line-height: 1.7;
		color: var(--nexus-text-secondary);
		margin: 0;
	}

	&__link {
		display: inline-flex;
		align-items: center;
		gap: 0.3rem;
		margin-block-start: 1rem;
		font-size: 0.875rem;
		font-weight: 600;
		color: var(--nexus-primary);
	}
}

// -------------------------------------------------------------------------
// Pricing Table
// -------------------------------------------------------------------------
.nexus-pricing-table {
	background-color: var(--nexus-bg);
	border: 1px solid var(--nexus-border-color);
	border-radius: var(--nexus-border-radius-xl, 1rem);
	overflow: hidden;
	position: relative;
	transition: transform var(--nexus-transition-base), box-shadow var(--nexus-transition-base);

	&:hover {
		transform: translateY(-4px);
		box-shadow: var(--nexus-shadow-lg);
	}

	&--featured {
		border-color: var(--nexus-primary);
		box-shadow: 0 0 0 3px rgba(var(--nexus-primary-rgb), 0.15);
	}

	&__badge {
		position: absolute;
		top: 1rem;
		inset-inline-end: 1rem;
		background-color: var(--nexus-primary);
		color: #fff;
		font-size: 0.75rem;
		font-weight: 700;
		padding: 0.25rem 0.75rem;
		border-radius: 100px;
		text-transform: uppercase;
		letter-spacing: 0.05em;
	}

	&__header {
		padding: 2rem;
		text-align: center;
		border-block-end: 1px solid var(--nexus-border-color);
	}

	&__icon {
		font-size: 2rem;
		color: var(--nexus-primary);
		margin-block-end: 0.75rem;
	}

	&__plan-name {
		font-size: 1.125rem;
		margin-block-end: 0.25rem;
	}

	&__plan-desc {
		font-size: 0.875rem;
		color: var(--nexus-text-muted);
		margin-block-end: 1.5rem;
	}

	&__price-wrap {
		display: flex;
		align-items: baseline;
		justify-content: center;
		flex-wrap: wrap;
		gap: 0.25rem;
	}

	&__price {
		display: flex;
		align-items: baseline;
	}

	&__currency {
		font-size: 1.25rem;
		font-weight: 700;
		align-self: flex-start;
		margin-block-start: 0.5rem;
	}

	&__amount {
		font-size: 3rem;
		font-weight: 800;
		line-height: 1;
		color: var(--nexus-heading-color);
	}

	&__original {
		font-size: 1rem;
		color: var(--nexus-text-muted);
		text-decoration: line-through;
	}

	&__period {
		font-size: 0.875rem;
		color: var(--nexus-text-muted);
		width: 100%;
		text-align: center;
		margin-block-start: 0.25rem;
	}

	&__features {
		padding: 1.5rem 2rem;

		ul {
			list-style: none;
			padding: 0;
			margin: 0;
		}
	}

	&__feature {
		display: flex;
		align-items: center;
		gap: 0.75rem;
		padding-block: 0.6rem;
		border-block-end: 1px solid var(--nexus-border-color);
		font-size: 0.9375rem;

		&:last-child { border-block-end: none; }

		&.is-unavailable {
			color: var(--nexus-text-muted);
			text-decoration: line-through;

			.nexus-pricing-table__feature-icon { color: var(--nexus-text-muted); }
		}
	}

	&__feature-icon {
		color: var(--nexus-success, #22c55e);
		font-weight: 700;
		font-size: 0.875rem;
		flex-shrink: 0;
	}

	&__footer {
		padding: 1.5rem 2rem;
	}
}

// -------------------------------------------------------------------------
// Counter
// -------------------------------------------------------------------------
.nexus-counter {
	padding: 1.5rem;

	&__icon {
		display: block;
		margin-block-end: 1rem;
		color: var(--nexus-primary);
	}

	&__number-wrap {
		display: flex;
		align-items: baseline;
		justify-content: center;
		gap: 0.1em;
	}

	&__number {
		font-size: clamp(2.5rem, 5vw, 3.5rem);
		font-weight: 800;
		line-height: 1;
		color: var(--nexus-heading-color);
	}

	&__prefix,
	&__suffix {
		font-size: 1.5rem;
		font-weight: 800;
		color: var(--nexus-primary);
	}

	&__title {
		font-size: 1rem;
		font-weight: 600;
		margin-block: 0.5rem 0;
	}

	&__desc {
		font-size: 0.875rem;
		color: var(--nexus-text-muted);
		margin: 0;
	}
}

// -------------------------------------------------------------------------
// CTA Banner
// -------------------------------------------------------------------------
.nexus-cta-banner {
	background-color: var(--nexus-primary);
	padding: 4rem 2rem;

	&__inner {
		max-width: var(--nexus-container-max-width);
		margin-inline: auto;
	}

	&--centered {
		text-align: center;

		.nexus-cta-banner__actions {
			justify-content: center;
		}
	}

	&--left-right .nexus-cta-banner__inner {
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: 2rem;
		flex-wrap: wrap;
	}

	&__text { flex: 1; }

	&__tagline {
		font-size: 0.875rem;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.08em;
		margin-block-end: 0.5rem;
	}

	&__headline {
		font-size: clamp(1.5rem, 3vw, 2.25rem);
		line-height: 1.25;
		margin-block-end: 0.75rem;
	}

	&__desc {
		font-size: 1rem;
		line-height: 1.7;
		margin-block-end: 0;
		max-width: 560px;

		.nexus-cta-banner--centered & { margin-inline: auto; }
	}

	&__actions {
		display: flex;
		gap: 1rem;
		flex-wrap: wrap;
		margin-block-start: 1.5rem;

		.nexus-cta-banner--left-right & {
			margin-block-start: 0;
			flex-shrink: 0;
		}
	}
}

// -------------------------------------------------------------------------
// Video Popup
// -------------------------------------------------------------------------
.nexus-video-popup {
	position: relative;
	overflow: hidden;
	background-size: cover;
	background-position: center;
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: var(--nexus-border-radius-lg);

	&__overlay {
		position: absolute;
		inset: 0;
	}

	&__play {
		position: relative;
		z-index: 2;
		border: none;
		cursor: pointer;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		transition: transform var(--nexus-transition-base), box-shadow var(--nexus-transition-base);

		&:hover {
			transform: scale(1.1);
			box-shadow: 0 0 0 12px rgba(255 255 255 / 20%);
		}
	}

	&__play-icon {
		font-size: 1.5rem;
		margin-inline-start: 0.2em; /* optical center for play triangle */
	}

	// Pulse variant
	&__pulse {
		position: absolute;
		inset: -8px;
		border-radius: 50%;
		border: 2px solid currentColor;
		animation: nexus-pulse 2s infinite;
		opacity: 0.4;
	}

	&__caption {
		position: absolute;
		bottom: 1.5rem;
		inset-inline: 0;
		text-align: center;
		z-index: 2;
		font-size: 0.9375rem;
		font-weight: 600;
	}
}

@keyframes nexus-pulse {
	0% { transform: scale(1); opacity: 0.4; }
	50% { transform: scale(1.15); opacity: 0.15; }
	100% { transform: scale(1); opacity: 0.4; }
}

// Video Modal
.nexus-video-modal {
	position: fixed;
	inset: 0;
	z-index: calc(var(--nexus-z-modal) + 10);
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 1rem;

	&:not(.is-open) { pointer-events: none; }

	&__backdrop {
		position: absolute;
		inset: 0;
		background-color: rgba(0 0 0 / 0.92);
		opacity: 0;
		transition: opacity 0.3s ease;
	}

	&.is-open &__backdrop { opacity: 1; }

	&__inner {
		position: relative;
		z-index: 1;
		width: 100%;
		max-width: 900px;
		opacity: 0;
		transform: scale(0.95);
		transition: opacity 0.3s ease, transform 0.3s ease;
	}

	&.is-open &__inner {
		opacity: 1;
		transform: scale(1);
	}

	&__close {
		position: absolute;
		top: -2.5rem;
		inset-inline-end: 0;
		background: none;
		border: none;
		color: #fff;
		font-size: 2rem;
		cursor: pointer;
		line-height: 1;
	}

	&__embed {
		position: relative;
		padding-block-end: 56.25%;
		height: 0;
		overflow: hidden;
		border-radius: var(--nexus-border-radius);
		background-color: #000;

		iframe,
		video {
			position: absolute;
			inset: 0;
			width: 100%;
			height: 100%;
		}
	}
}

// -------------------------------------------------------------------------
// Product Carousel
// -------------------------------------------------------------------------
.nexus-product-carousel {
	overflow: hidden;
	position: relative;
}

.nexus-product-card {
	background-color: var(--nexus-bg);
	border: 1px solid var(--nexus-border-color);
	border-radius: var(--nexus-border-radius-lg);
	overflow: hidden;
	transition: transform var(--nexus-transition-base), box-shadow var(--nexus-transition-base);

	&:hover {
		transform: translateY(-4px);
		box-shadow: var(--nexus-shadow-md);
	}

	&__thumb {
		position: relative;
		overflow: hidden;
		aspect-ratio: 1;

		img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			transition: transform var(--nexus-transition-base);
		}

		&:hover img { transform: scale(1.05); }
	}

	&__badge {
		position: absolute;
		top: 0.75rem;
		inset-inline-start: 0.75rem;
		font-size: 0.6875rem;
		font-weight: 700;
		text-transform: uppercase;
		letter-spacing: 0.06em;
		padding: 0.2rem 0.5rem;
		border-radius: var(--nexus-border-radius-sm);
		color: #fff;
		z-index: 2;

		&--sale { background-color: var(--nexus-danger, #ef4444); }
		&--featured { background-color: var(--nexus-warning, #f97316); }
	}

	&__actions {
		position: absolute;
		bottom: 0.75rem;
		inset-inline: 0;
		display: flex;
		justify-content: center;
		gap: 0.5rem;
		transform: translateY(100%);
		transition: transform var(--nexus-transition-base);
	}

	&__thumb:hover &__actions {
		transform: translateY(0);
	}

	&__body {
		padding: 1rem;
	}

	&__title {
		font-size: 0.9375rem;
		margin-block-end: 0.5rem;

		a {
			color: var(--nexus-heading-color);
			text-decoration: none;
			transition: color var(--nexus-transition-fast);

			&:hover { color: var(--nexus-primary); }
		}
	}

	&__rating {
		margin-block-end: 0.35rem;

		.star-rating { font-size: 0.8125rem; }
	}

	&__price {
		.price {
			font-weight: 700;
			color: var(--nexus-primary);

			del {
				font-weight: 400;
				color: var(--nexus-text-muted);
				margin-inline-end: 0.3rem;
			}
		}
	}
}
